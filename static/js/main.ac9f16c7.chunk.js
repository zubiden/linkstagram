(this.webpackJsonplinkstagram=this.webpackJsonplinkstagram||[]).push([[0],{12:function(e,t,n){e.exports={post:"Post_post__1te52",header:"Post_header__3Gzyc",info:"Post_info__Xy-Np",name:"Post_name__3CpU5",time:"Post_time__3_nO7",more:"Post_more__14-xe",content:"Post_content__22_-o",square:"Post_square__1NR8U",image:"Post_image__2bHNs",description:"Post_description__3kjSL",footer:"Post_footer__3xwoU",iconText:"Post_iconText__1hpKr",liked:"Post_liked__2HS1G",text:"Post_text__25F5P",separator:"Post_separator__1SbIb",share:"Post_share__287j5"}},120:function(e,t,n){e.exports={textArea:"TextArea_textArea__2zwX3"}},121:function(e,t,n){e.exports={input:"Input_input__3EuCO"}},122:function(e,t,n){e.exports={slider:"StoriesSlider_slider__4u2ic"}},13:function(e,t,n){e.exports={profileEdit:"ProfileEdit_profileEdit__iDLMl",header:"ProfileEdit_header__3Idmi",title:"ProfileEdit_title__2TGIH",logout:"ProfileEdit_logout__2m76b",topBlock:"ProfileEdit_topBlock__ETWyG",avatarWrapper:"ProfileEdit_avatarWrapper__1XsL3",avatar:"ProfileEdit_avatar__1SRbI",avatarText:"ProfileEdit_avatarText__2toBy",name:"ProfileEdit_name__2mX0L",input:"ProfileEdit_input__L2H48",description:"ProfileEdit_description__3JWjj",buttons:"ProfileEdit_buttons__1p7ap"}},20:function(e,t,n){e.exports={header:"Header_header__1fCsm",logo:"Header_logo__2gAbO",separator:"Header_separator__wmxr4",button:"Header_button__1JOra",dropdown:"Header_dropdown__39YJG",control:"Header_control__tUaTp",placeholder:"Header_placeholder__20Sp9",menu:"Header_menu__1bgN5",option:"Header_option__1oXVO",reserver:"Header_reserver__iHJu7"}},21:function(e,t,n){e.exports={login:"Login_login__ouCTB",content:"Login_content__3YGvZ",presentation:"Login_presentation__145vV",authPane:"Login_authPane__IHzBx",title:"Login_title__3VCx7",input:"Login_input__2gh-1",button:"Login_button__2Vpm8",error:"Login_error__3SyBg",mobileSeparator:"Login_mobileSeparator___RmK7",switch:"Login_switch__4MshC",inlineSwitch:"Login_inlineSwitch__1ywMx"}},279:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(46),c=n.n(o),i=n(57),s=n.n(i),l=n(22),u=n(25),d=n(6),f=n(15),j=n(7),p=n(23),_=n(10),b=n.n(_),h=n(36),m=n.n(h),v=n(0),O=function(e){var t,n=e.color,a=void 0===n?"white":n,r=e.lightBorder,o=void 0!==r&&r,c=e.square,i=void 0!==c&&c,s=e.to,l=e.className,u=e.children,_=e.smallPadding,h=void 0!==_&&_,O=e.onClick,x=Object(p.a)(e,["color","lightBorder","square","to","className","children","smallPadding","onClick"]),g=Object(d.g)();return Object(v.jsx)("button",Object(f.a)(Object(f.a)({className:b()((t={},Object(j.a)(t,m.a.button,!0),Object(j.a)(t,m.a[a],!0),Object(j.a)(t,m.a.square,i),Object(j.a)(t,m.a.lightBorder,o),Object(j.a)(t,m.a.smallPadding,h),t),l),onClick:function(e){null===O||void 0===O||O(e),s&&g.push(s)}},x),{},{children:u}))},x=n(4),g=n(76),w=n(2),N=n.n(w),P=n(5),k=n(8),C={uk:"UA",en:"EN"},y={strings:{},code:localStorage.getItem("langCode")||"en",status:"idle"},S=Object(k.b)("localization/setLanguage",function(){var e=Object(P.a)(N.a.mark((function e(t,n){var a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in C)){e.next=8;break}if(a=n.getState(),r=A(a),!Object.keys(r).length||t!==F(a)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",fetch("".concat("language","/").concat(t,".json")).then((function(e){return e.json()})).then((function(e){var a={};for(var r in e)a[r]=e[r];return localStorage.setItem("langCode",t),n.dispatch(T(t)),a})));case 8:throw new Error("Not a valid language!");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(k.c)({name:"localization",initialState:y,reducers:{setLanguageCode:function(e,t){e.code=t.payload}},extraReducers:function(e){e.addCase(S.pending,(function(e){e.status="loading"})).addCase(S.fulfilled,(function(e,t){e.status="idle",e.strings=t.payload}))}}),I=E.reducer,T=E.actions.setLanguageCode,F=function(e){return e.localization.code},A=function(e){return e.localization.strings},q=n(14),B="https://linkstagram-api.ga",L=function(e){return fetch("".concat(B,"/login"),{method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){var t=e.headers.get("authorization");return t?localStorage.setItem("auth",t):localStorage.removeItem("auth"),e.json()}))},z=function(e){return W("".concat(B,"/posts/").concat(e,"/comments"))},R=function(e){return W("".concat(B,"/posts/").concat(e,"/like"),"DELETE")},H=function(e){return W("".concat(B,"/posts/").concat(e,"/like"),"POST")},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return W("".concat(B,"/posts?page=").concat(e))},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return W("".concat(B,"/profiles/").concat(e,"/posts?page=").concat(t))},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return W("".concat(B,"/profiles?page=").concat(e))},V=function(e){return W("".concat(B,"/profiles/").concat(e))},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};a.headers=new Headers({"Content-Type":"application/json"}),n&&(a.body=JSON.stringify(n));var r=localStorage.getItem("auth");return r&&a.headers.set("Authorization","Bearer "+r),fetch(e,a).then((function(e){if(!e.ok)throw Error();return e.text()})).then((function(e){return 0===e.length?{}:JSON.parse(e)}))},M=Object(k.b)("posts/fetchAllPosts",function(){var e=Object(P.a)(N.a.mark((function e(t,n){var a,r,o,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.dispatch(te(t||null)),a=!0,r=[],o=1,c=N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t?D(t,o):U(o);case 2:(n=e.sent).length&&!r.find((function(e){return e.id===n[0].id}))?r.push.apply(r,Object(q.a)(n)):a=!1,o++;case 5:case"end":return e.stop()}}),e)}));case 5:if(!a){e.next=9;break}return e.delegateYield(c(),"t0",7);case 7:e.next=5;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),G=Object(k.b)("posts/fetchPost",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n=t,W("".concat(B,"/posts/").concat(n))));case 1:case"end":return e.stop()}var n}),e)})));return function(t,n){return e.apply(this,arguments)}}()),X=Object(k.b)("posts/like",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:n.dispatch(G(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Y=Object(k.b)("posts/dislike",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t);case 2:n.dispatch(G(t));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(k.b)("posts/delete",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t,W("".concat(B,"/posts/").concat(a),"DELETE");case 2:n.dispatch(ne(t));case 3:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(k.b)("posts/post",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t,W("".concat(B,"/posts"),"POST",{post:a});case 2:n.dispatch(M(oe(n.getState())));case 3:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Z=Object(k.c)({name:"posts",initialState:{loadedPosts:[],currentPostsUsername:null,status:"idle"},reducers:{setCurrentPostsUsername:function(e,t){e.currentPostsUsername=t.payload},removePost:function(e,t){e.loadedPosts=e.loadedPosts.filter((function(e){return e.id!==t.payload}))}},extraReducers:function(e){e.addCase(M.pending,(function(e){e.status="loading",e.loadedPosts=[]})).addCase(M.fulfilled,(function(e,t){e.status="idle",e.loadedPosts=t.payload})).addCase(M.rejected,(function(e){e.status="failed"})).addCase(G.fulfilled,(function(e,t){var n=e.loadedPosts.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.loadedPosts[n]=t.payload)}))}}),$=Z.reducer,ee=Z.actions,te=ee.setCurrentPostsUsername,ne=ee.removePost,ae=function(e){return e.posts.loadedPosts},re=function(e){return e.posts.status},oe=function(e){return e.posts.currentPostsUsername},ce=Object(k.b)("profile/fetchAllProfiles",Object(P.a)(N.a.mark((function e(){var t,n,a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=[],a=1,r=N.a.mark((function e(){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(a);case 2:(r=e.sent).length&&!n.find((function(e){return e.username===r[0].username}))?n.push.apply(n,Object(q.a)(r)):t=!1,a++;case 5:case"end":return e.stop()}}),e)}));case 4:if(!t){e.next=8;break}return e.delegateYield(r(),"t0",6);case 6:e.next=4;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))),ie=Object(k.b)("profile/fetchAccount",Object(P.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("".concat(B,"/account"));case 2:if(t=e.sent,!t.error){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))),se=Object(k.b)("profile/updateAccount",function(){var e=Object(P.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=t,W("".concat(B,"/account"),"PATCH",{account:r});case 2:if(!("error"in(a=e.sent))){e.next=7;break}throw Error("Failed to update account");case 7:return n.dispatch(M(oe(n.getState()))),e.abrupt("return",a);case 9:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}()),le=Object(k.b)("profile/logount",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("auth"),n.dispatch(je()),n.dispatch(M());case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var ue=Object(k.c)({name:"profile",initialState:{account:null,allProfiles:[],profilesFetchStatus:"idle",accountFetchStatus:"idle"},reducers:{clearCurrentAccount:function(e){e.account=null},resetAccountFetchStatus:function(e){e.accountFetchStatus="idle"}},extraReducers:function(e){e.addCase(ce.pending,(function(e){e.profilesFetchStatus="loading"})).addCase(ce.fulfilled,(function(e,t){e.profilesFetchStatus="idle",e.allProfiles=t.payload})).addCase(ce.rejected,(function(e){e.profilesFetchStatus="failed",e.allProfiles=[]})).addCase(ie.pending,(function(e){e.accountFetchStatus="loading"})).addCase(ie.fulfilled,(function(e,t){e.accountFetchStatus="idle",e.account=t.payload})).addCase(ie.rejected,(function(e){e.accountFetchStatus="failed",e.account=null,localStorage.removeItem("auth")})).addCase(se.fulfilled,(function(e,t){e.account=t.payload}))}}),de=ue.reducer,fe=ue.actions,je=fe.clearCurrentAccount,pe=(fe.resetAccountFetchStatus,function(e){return e.profile.allProfiles}),_e=function(e){return e.profile.account},be=function(e){return!!e.profile.account},he=function(e){return"loading"===e.profile.accountFetchStatus},me=function(){return Object(l.b)()},ve=l.c,Oe=function(){var e=ve(be),t=ve(he),n=Object(d.g)();return function(a){t||(e?null===a||void 0===a||a():n.push("/login"))}},xe=function(){var e=ve(A),t=ve(F);return function n(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NO_TRANSLATION_KEY_PROVIDED",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(we(a))return n(a.key,a.replaces,a.count,a.defaultValue);var i=e[a];if(!i)return c||a;var s=a;for(var l in s=Ne(i)?i[ge(t,o)]||i.other:i,r){var u=r[l];s=s.replaceAll("{".concat(l,"}"),u)}return s}},ge=function(e,t){return{uk:g.b,en:g.a}[e](t)},we=function(e){return void 0===e.length},Ne=function(e){return void 0===e.length},Pe=n(48),ke=n.n(Pe),Ce=function(){var e=xe();return Object(v.jsxs)("footer",{className:ke.a.footer,children:[Object(v.jsxs)("div",{className:ke.a.buttonRow,children:[Object(v.jsx)(ye,{text:e("footer_about")}),Object(v.jsx)(ye,{text:e("footer_help")}),Object(v.jsx)(ye,{text:e("footer_privacy")}),Object(v.jsx)(ye,{text:e("footer_terms")}),Object(v.jsx)(ye,{text:e("footer_locations")}),Object(v.jsx)(ye,{text:e("footer_language")})]}),Object(v.jsx)("div",{className:ke.a.buttonRow,children:Object(v.jsx)(ye,{text:e("footer_copyright",{year:2021..toString()})})})]})},ye=function(e){var t=e.text;return Object(v.jsx)("div",{className:ke.a.greyButton,children:t})},Se=n(118),Ee=n.n(Se),Ie=n(37),Te=n.n(Ie),Fe=function(e){var t,n,a=e.url,r=e.size,o=void 0===r?"4em":r,c=e.border,i=void 0!==c&&c,s=e.clickable,l=e.to,u=e.className,_=e.onClick,h=Object(p.a)(e,["url","size","border","clickable","to","className","onClick"]);a=a||"images/placeholder.png",s=s||!!l||!!_;var m=Object(d.g)();return Object(v.jsx)("div",Object(f.a)(Object(f.a)({className:b()((t={},Object(j.a)(t,Te.a.square,!0),Object(j.a)(t,Te.a.clickable,s),t)),style:{width:o},onClick:function(e){null===_||void 0===_||_(e),l&&m.push(l)}},h),{},{children:Object(v.jsx)("div",{className:b()((n={},Object(j.a)(n,Te.a.border,!0),Object(j.a)(n,Te.a.visible,i),n),u),children:Object(v.jsx)("img",{src:a,className:Te.a.avatar,alt:"Avatar"})})}))},Ae=n(20),qe=n.n(Ae),Be=function(e){var t=e.home,n=void 0!==t&&t,a=e.profile,r=void 0!==a&&a,o=e.login,c=void 0!==o&&o,i=me(),s=xe(),l=ve(be),d=ve(_e),f=ve(F),j=Object.entries(C).map((function(e){var t=Object(x.a)(e,2);return{value:t[0],label:t[1],className:qe.a.option}}));return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("header",{className:qe.a.header,children:[Object(v.jsx)(u.b,{to:"/",className:qe.a.logo,children:"Linkstagram"}),Object(v.jsx)("div",{className:qe.a.separator}),n&&Object(v.jsx)(O,{color:"black",className:qe.a.button,to:"/",children:s("header_home")}),Object(v.jsx)(Ee.a,{options:j,value:C[f],onChange:function(e){return i(S(e.value))},className:qe.a.dropdown,controlClassName:qe.a.control,placeholderClassName:qe.a.placeholder,menuClassName:qe.a.menu}),c&&!l&&Object(v.jsx)(O,{color:"black",className:qe.a.button,to:"/login",children:s("general_login")}),r&&l&&Object(v.jsx)(Fe,{url:d.profile_photo_url,size:"2.5em",to:"/profile"})]}),Object(v.jsx)("div",{className:qe.a.reserver})]})},Le=Object(k.b)("comments/fetchAllPosts",function(){var e=Object(P.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(He(t)),e.abrupt("return",z(t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ze=Object(k.c)({name:"comments",initialState:{loadedComments:[],currentPostId:-1,status:"idle"},reducers:{setCurrentPostId:function(e,t){e.currentPostId=t.payload}},extraReducers:function(e){e.addCase(Le.pending,(function(e){e.status="loading",e.loadedComments=[]})).addCase(Le.fulfilled,(function(e,t){e.status="idle",e.loadedComments=t.payload})).addCase(Le.rejected,(function(e){e.status="failed"}))}}),Re=ze.reducer,He=ze.actions.setCurrentPostId,Ue=Object(k.a)({reducer:{posts:$,profile:de,comments:Re,localization:I}}),De=function(e,t){"string"===typeof e&&(e=new Date(e.replace(/-/g,"/")).getTime()/1e3);var n=Math.abs(t-e);if(n<60)return{key:"date_now"};if(n<3600){var a=Math.floor(n/60);return{key:"date_minutes",count:a,replaces:{count:a.toString()}}}if(n<86400){var r=Math.floor(n/3600);return{key:"date_hours",count:r,replaces:{count:r.toString()}}}return{key:"date_date",replaces:{date:new Date(1e3*e).toLocaleDateString(F(Ue.getState()),{year:"numeric",month:"long",day:"2-digit"})}}},Je=function(e){var t=e.split("\n").map((function(e,t){return[e,Object(v.jsx)("br",{},t)]})).flat(1);return t.pop(),t},Ve=n(12),We=n.n(Ve),Me=function(e){var t=e.post,n=xe(),a=me(),r=ve(_e),o=Oe();return Object(v.jsxs)("div",{className:We.a.post,children:[Object(v.jsxs)("div",{className:We.a.header,children:[Object(v.jsx)(Fe,{url:t.author.profile_photo_url,size:"2.5em",to:"/profile/".concat(t.author.username)}),Object(v.jsxs)("div",{className:We.a.info,children:[Object(v.jsx)("div",{className:We.a.name,children:"".concat(t.author.first_name||""," ").concat(t.author.last_name||"")}),Object(v.jsx)("div",{className:We.a.time,children:n(De(t.created_at,Date.now()))})]}),Object(v.jsx)("div",{className:We.a.more,onClick:function(){(null===r||void 0===r?void 0:r.username)===t.author.username&&a(K(t.id))},children:Object(v.jsx)("i",{className:"icon icon-more"})})]}),Object(v.jsxs)("div",{className:We.a.content,children:[!!t.photos.length&&Object(v.jsx)("div",{className:We.a.square,children:Object(v.jsx)("img",{src:t.photos[0].url,className:We.a.image,alt:"Post content"})}),t.description&&Object(v.jsx)("div",{className:We.a.description,children:Je(t.description)})]}),Object(v.jsxs)("div",{className:We.a.footer,children:[Object(v.jsx)(Ge,{icon:"like",text:t.likes_count.toString(),liked:t.is_liked,onClick:function(){return o((function(){return a(t.is_liked?Y(t.id):X(t.id))}))}}),Object(v.jsx)(Ge,{icon:"comments",text:"0"}),Object(v.jsx)("div",{className:We.a.separator}),Object(v.jsxs)("div",{className:We.a.share,children:[n("post_share")," ",Object(v.jsx)("i",{className:"icon icon-arrow"})]})]})]})},Ge=function(e){var t,n=e.icon,a=e.text,r=e.liked,o=void 0!==r&&r,c=e.onClick;return Object(v.jsxs)("span",{className:We.a.iconText,onClick:c,children:[Object(v.jsx)("i",{className:b()((t={icon:!0},Object(j.a)(t,"icon-".concat(n),!0),Object(j.a)(t,We.a.liked,o),t))}),Object(v.jsx)("span",{className:We.a.text,children:a})]})},Xe=n(38),Ye=n.n(Xe),Ke=function(e){var t=e.username,n=me(),r=xe();Object(a.useEffect)((function(){n(M(t))}),[t,n]);var o,c=Object(l.c)(ae),i=Object(l.c)(re);return o="idle"===i?c.length?c.map((function(e){return Object(v.jsx)(Me,{post:e},e.id)})):Object(v.jsx)("div",{className:Ye.a.text,children:r("feed_no_posts")}):"loading"===i?Object(v.jsx)("div",{className:Ye.a.text,children:r("general_loading")}):Object(v.jsx)("div",{className:Ye.a.text,children:r("general_error_loading")}),Object(v.jsx)("div",{className:Ye.a.feed,children:Object(v.jsx)("div",{className:Ye.a.postList,children:o})})},Qe=n(119),Ze=n.n(Qe),$e=n(73),et=n.n($e),tt=function(){var e=et()({restrictions:{maxNumberOfFiles:1,allowedFileTypes:["image/png","image/jpg","image/jpeg"],maxFileSize:5242880}});return e.use(Ze.a,{companionUrl:B}),e},nt=function(e,t){return e.addFile({name:t.name,type:t.type,data:t,source:"Local"})},at=function(e){return e.map((function(e){var t=e.meta.key.split("/"),n=Object(x.a)(t,2),a=n[0];return{id:n[1],storage:a,metadata:{filename:e.meta.name,size:e.data.size,mime_type:e.data.type}}}))},rt=n(77),ot=n.n(rt),ct=function(e){var t=e.uppy,n=e.accept,r=void 0===n?[]:n,o=e.text,c=e.defaultPreviewUrl,i=e.className,s=Object(a.useRef)(null),l=Object(a.useState)([]),u=Object(x.a)(l,2),d=u[0],f=u[1];Object(a.useEffect)((function(){t.getFiles().forEach((function(e){return t.removeFile(e.id)})),d.forEach((function(e){return nt(t,e)}))}),[d,t]);var p=function(e){e.preventDefault(),e.stopPropagation()};return Object(v.jsxs)("div",{className:b()(Object(j.a)({},ot.a.file,!0),i),onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.click()},onDragOver:p,onDragEnter:p,onDragLeave:p,onDrop:function(e){e.preventDefault(),f(Array.from(e.dataTransfer.files))},children:[Object(v.jsx)("div",{className:ot.a.preview,children:d.length?d.map((function(e){return Object(v.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview"})})):c?Object(v.jsx)("img",{src:c,alt:"Preview"}):o}),Object(v.jsx)("input",{type:"file",accept:r.join(","),ref:s,hidden:!0,onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&f(Array.from(e.target.files))}})]})},it=n(78),st=n.n(it),lt=function(e){var t=e.isOpen,n=e.onRequestClose,a=e.className,r=e.children;return Object(v.jsx)(s.a,{className:b()(st.a.modal,a),overlayClassName:st.a.overlay,isOpen:t,onRequestClose:n,children:r})},ut=n(128),dt=n(120),ft=n.n(dt),jt=function(e){var t=e.label,n=e.placeholder,a=e.className,r=Object(p.a)(e,["label","placeholder","className"]);return Object(v.jsxs)("label",{className:b()(Object(j.a)({},ft.a.textArea,!0),a),children:[t,Object(v.jsx)(ut.a,Object(f.a)({placeholder:n},r))]})},pt=n(49),_t=n.n(pt),bt=tt(),ht=function(e){var t=e.opened,n=void 0!==t&&t,r=e.onRequestClose,o=xe(),c=me(),i=Object(a.useState)(""),s=Object(x.a)(i,2),l=s[0],u=s[1];return Object(a.useEffect)((function(){n||u("")}),[n]),Object(v.jsxs)(lt,{className:_t.a.newPost,isOpen:n,onRequestClose:r,children:[Object(v.jsx)(ct,{text:o("post_new_file"),className:_t.a.input,uppy:bt}),Object(v.jsx)(jt,{className:_t.a.description,minRows:5,placeholder:o("post_new_description_placeholder"),label:o("post_new_description"),onChange:function(e){return u(e.currentTarget.value)},value:l}),Object(v.jsxs)("div",{className:_t.a.buttons,children:[Object(v.jsx)(O,{lightBorder:!0,onClick:r,children:o("general_cancel")}),Object(v.jsx)(O,{color:"blue",onClick:function(){var e=Object(P.a)(N.a.mark((function e(t){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.upload();case 2:(n=e.sent).successful.length?(a=at(n.successful),c(Q({description:l,photos_attributes:a.map((function(e){return{image:e}}))})),null===r||void 0===r||r(t)):0===n.successful.length&&0===n.failed.length&&l&&(c(Q({description:l,photos_attributes:[]})),null===r||void 0===r||r(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:o("post_new_post")})]})]})},mt=n(121),vt=n.n(mt),Ot=function(e){var t=e.label,n=e.placeholder,a=(e.icon,e.iconColor,e.className),r=Object(p.a)(e,["label","placeholder","icon","iconColor","className"]);return Object(v.jsxs)("label",{className:b()(Object(j.a)({},vt.a.input,!0),a),children:[t,Object(v.jsx)("input",Object(f.a)({placeholder:n},r))]})},xt=n(13),gt=n.n(xt),wt=tt(),Nt=function(e){var t=e.opened,n=void 0!==t&&t,r=e.onRequestClose,o=xe(),c=me(),i=ve(_e),s=Object(a.useState)(null===i||void 0===i?void 0:i.first_name),l=Object(x.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(null===i||void 0===i?void 0:i.last_name),p=Object(x.a)(j,2),_=p[0],h=p[1],m=Object(a.useState)(null===i||void 0===i?void 0:i.job_title),g=Object(x.a)(m,2),w=g[0],k=g[1],C=Object(a.useState)(null===i||void 0===i?void 0:i.description),y=Object(x.a)(C,2),S=y[0],E=y[1];return i?Object(v.jsxs)(lt,{className:gt.a.profileEdit,isOpen:n,onRequestClose:r,children:[Object(v.jsxs)("div",{className:gt.a.header,children:[Object(v.jsx)("div",{className:gt.a.title,children:o("profile_edit_title")}),Object(v.jsx)("div",{className:gt.a.logout,onClick:function(e){c(le()),null===r||void 0===r||r(e)},children:o("general_logout")})]}),Object(v.jsxs)("div",{className:gt.a.topBlock,children:[Object(v.jsxs)("div",{className:gt.a.avatarWrapper,children:[Object(v.jsx)(ct,{className:gt.a.avatar,uppy:wt,defaultPreviewUrl:i.profile_photo_url}),Object(v.jsx)("div",{className:gt.a.avatarText,children:o("profile_edit_photo")})]}),Object(v.jsxs)("div",{className:gt.a.name,children:[Object(v.jsx)(Ot,{className:gt.a.input,label:o("profile_edit_first_name"),placeholder:o("profile_edit_first_name_placeholder"),value:u,onChange:function(e){return d(e.currentTarget.value)}}),Object(v.jsx)(Ot,{className:gt.a.input,label:o("profile_edit_second_name"),placeholder:o("profile_edit_second_name_placeholder"),value:_,onChange:function(e){return h(e.currentTarget.value)}})]})]}),Object(v.jsx)(Ot,{className:gt.a.input,label:o("profile_edit_job_title"),placeholder:o("profile_edit_job_title_placeholder"),value:w,onChange:function(e){return k(e.currentTarget.value)}}),Object(v.jsx)(jt,{className:b()(gt.a.input,gt.a.description),label:o("profile_edit_description"),placeholder:o("profile_edit_description_placeholder"),value:S,onChange:function(e){return E(e.currentTarget.value)}}),Object(v.jsxs)("div",{className:gt.a.buttons,children:[Object(v.jsx)(O,{lightBorder:!0,onClick:r,children:o("general_cancel")}),Object(v.jsx)(O,{color:"blue",onClick:function(){var e=Object(P.a)(N.a.mark((function e(t){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(f.a)({},i)).first_name=u,n.last_name=_,n.job_title=w,n.description=S,!wt.getFiles().length){e.next=10;break}return e.next=8,wt.upload();case 8:(a=e.sent).successful.length&&(n.profile_photo=at(a.successful)[0]);case 10:c(se(n)),null===r||void 0===r||r(t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:o("general_save")})]})]}):Object(v.jsx)(lt,{className:gt.a.profileEdit,isOpen:n,onRequestClose:r,children:"NO ACCOUNT!!!"})},Pt=n(3),kt=n.n(Pt),Ct=function(e){var t=e.profile,n=e.own,r=void 0!==n&&n,o=e.horizontal,c=void 0!==o&&o,i=xe(),s=Oe(),l=Object(a.useState)(!1),u=Object(x.a)(l,2),d=u[0],f=u[1],j=Object(a.useState)(!1),p=Object(x.a)(j,2),_=p[0],h=p[1],m="".concat(t.first_name||""," ").concat(t.last_name||"");return c?Object(v.jsxs)("div",{className:b()([kt.a.profileInfo,kt.a.horizontal]),children:[Object(v.jsx)(Fe,{url:t.profile_photo_url,border:!0,size:"7.25em"}),Object(v.jsxs)("div",{className:kt.a.info,children:[Object(v.jsx)("div",{className:kt.a.name,children:m}),Object(v.jsx)("div",{className:kt.a.job,children:t.job_title||""}),Object(v.jsx)("div",{className:kt.a.description,children:Je(t.description||"")})]}),Object(v.jsx)("div",{className:kt.a.separator}),Object(v.jsxs)("div",{className:kt.a.right,children:[Object(v.jsxs)("div",{className:kt.a.social,children:[Object(v.jsxs)("div",{className:kt.a.followers,children:[Object(v.jsx)("div",{className:kt.a.number,children:t.followers}),Object(v.jsx)("div",{className:kt.a.smallText,children:i("profile_followers",{},t.followers)})]}),Object(v.jsxs)("div",{className:kt.a.following,children:[Object(v.jsx)("div",{className:kt.a.number,children:t.following}),Object(v.jsx)("div",{className:kt.a.smallText,children:i("profile_following")})]})]}),r&&Object(v.jsxs)("div",{className:kt.a.actionButtons,children:[Object(v.jsx)(O,{smallPadding:!0,lightBorder:!0,onClick:function(){return s((function(){return h(!0)}))},children:i("profile_edit")}),Object(v.jsx)(O,{smallPadding:!0,color:"blue",onClick:function(){return s((function(){return f(!0)}))},children:i("post_new")})]})]}),Object(v.jsx)(ht,{opened:d,onRequestClose:function(){return f(!1)}}),Object(v.jsx)(Nt,{opened:_,onRequestClose:function(){return h(!1)}})]}):Object(v.jsxs)("div",{className:kt.a.profileInfo,children:[Object(v.jsxs)("div",{className:kt.a.top,children:[Object(v.jsxs)("div",{className:kt.a.followers,children:[Object(v.jsx)("div",{className:kt.a.number,children:t.followers}),Object(v.jsx)("div",{className:kt.a.smallText,children:i("profile_followers",{},t.followers)})]}),Object(v.jsx)(Fe,{url:t.profile_photo_url,border:!0,size:"5em"}),Object(v.jsxs)("div",{className:kt.a.following,children:[Object(v.jsx)("div",{className:kt.a.number,children:t.following}),Object(v.jsx)("div",{className:kt.a.smallText,children:i("profile_following")})]})]}),Object(v.jsxs)("div",{className:kt.a.bottom,children:[Object(v.jsxs)("div",{className:kt.a.info,children:[m," ",t.job_title?"- ".concat(t.job_title||""):""]}),Object(v.jsx)("div",{className:kt.a.description,children:Je(t.description||"")}),r&&Object(v.jsxs)("div",{className:kt.a.actionButtons,children:[Object(v.jsx)(O,{smallPadding:!0,onClick:function(){return s((function(){return h(!0)}))},children:i("profile_edit")}),Object(v.jsx)(O,{smallPadding:!0,color:"blue",onClick:function(){return s((function(){return f(!0)}))},children:i("post_new")})]})]}),Object(v.jsx)(ht,{opened:d,onRequestClose:function(){return f(!1)}}),Object(v.jsx)(Nt,{opened:_,onRequestClose:function(){return h(!1)}})]})},yt=n(122),St=n.n(yt),Et=function(){var e=me();Object(a.useEffect)((function(){e(ce())}),[e]);var t=ve(pe);return Object(v.jsx)("div",{className:St.a.slider,children:t.filter((function(e){return e.profile_photo_url})).map((function(e){return Object(v.jsx)(Fe,{url:e.profile_photo_url,size:"4em",to:"/profile/".concat(e.username),border:!0},e.username)}))})},It=n(39),Tt=n.n(It),Ft=function(){var e=xe(),t=ve(be),n=ve(_e);return Object(v.jsxs)("div",{className:Tt.a.home,children:[Object(v.jsx)(Be,{profile:!0,login:!0}),Object(v.jsxs)("div",{className:Tt.a.content,children:[Object(v.jsxs)("div",{className:Tt.a.left,children:[Object(v.jsx)(Et,{}),Object(v.jsx)(Ke,{})]}),Object(v.jsx)("div",{className:Tt.a.right,children:Object(v.jsxs)("div",{className:Tt.a.sticky,children:[t?Object(v.jsx)(Ct,{profile:n,own:!0}):Object(v.jsx)(O,{color:"black",to:"/login",children:e("general_login")}),Object(v.jsx)(Ce,{})]})})]})]})},At=n(40),qt=n(41),Bt=function(){return window.innerWidth>=1014},Lt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),zt=n(21),Rt=n.n(zt),Ht=function(e){var t=e.signUp,n=void 0!==t&&t,a=xe();return Object(v.jsx)(O,{className:Rt.a.button,color:"blue",type:"submit",children:a(n?"login_sign_up_button":"login_login_button")})},Ut=function(e){var t=e.field,n=e.form,a=n.touched,r=n.errors,o=n.setFieldValue,c=n.values,i=Object(p.a)(e,["field","form"]);return Object(v.jsxs)("div",{className:Rt.a.input,children:[Object(v.jsx)(Ot,Object(f.a)({onChange:function(e){return o(t.name,e.currentTarget.value)},name:t.name,value:c[t.name]},i)),a[t.name]&&r[t.name]&&Object(v.jsx)("div",{className:Rt.a.error,children:r[t.name]})]})},Dt=function(){var e=xe(),t=me(),n=ve(be),r=Object(a.useState)(!1),o=Object(x.a)(r,2),c=o[0],i=o[1],s=qt.a().shape({email:qt.b().email(e("login_validation_email_invalid")).required(e("login_validation_required")),username:c?qt.b().min(3,e("login_validation_min_length",{count:"3"},3)).max(20,e("login_validation_max_length",{count:"20"},20)).matches(/^[a-zA-Z0-9._-]*$/,"Use alphabet, numbers and _ -").test("isTaken",e("login_validation_username_taken"),(function(e){return!e||new Promise((function(t,n){V(e).then((function(e){t(!1)})).catch((function(){t(!0)}))}))})).required(e("login_validation_required")):qt.b(),password:qt.b().min(6,e("login_validation_min_length",{count:"6"},6)).required(e("login_validation_required"))});return n?Object(v.jsx)(d.a,{to:"/"}):Object(v.jsxs)("div",{className:Rt.a.login,children:[Object(v.jsx)(Be,{}),Object(v.jsxs)("div",{className:Rt.a.content,children:[Object(v.jsx)("div",{className:Rt.a.presentation,children:"Photos go wroom"}),Object(v.jsxs)("div",{className:Rt.a.authPane,children:[Object(v.jsx)("div",{className:Rt.a.title,children:e(c?"login_sign_up":"login_login")}),Object(v.jsx)(At.c,{initialValues:{email:"",username:"",password:""},onSubmit:function(){var e=Object(P.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c?(a={login:n.email,password:n.password,username:n.username},fetch("".concat(B,"/create-account"),{method:"POST",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){var t=e.headers.get("authorization");return t?localStorage.setItem("auth",t):localStorage.removeItem("auth"),e.json()}))).then((function(){return t(ie())})):L({login:n.email,password:n.password}).then((function(){return t(ie())}));case 1:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),validationSchema:s,children:Object(v.jsxs)(At.b,{children:[Object(v.jsx)(At.a,{name:"email",type:"email",component:Ut,label:e("login_field_email_label"),placeholder:e("login_field_email_placeholder")}),c&&Object(v.jsx)(At.a,{name:"username",component:Ut,label:e("login_field_username_label"),placeholder:e("login_field_username_placeholder")}),Object(v.jsx)(At.a,{name:"password",component:Ut,type:"password",label:e("login_field_password_label"),placeholder:e("login_field_password_placeholder")}),Object(v.jsx)("div",{className:Rt.a.mobileSeparator}),Bt()&&Object(v.jsx)(Ht,{signUp:c}),Object(v.jsxs)("div",{className:Rt.a.switch,children:[e(c?"login_have_account":"login_no_account"),Object(v.jsx)("span",{className:Rt.a.inlineSwitch,onClick:function(){return i(!c)},children:e(c?"login_login":"login_sign_up")})]}),!Bt()&&Object(v.jsx)(Ht,{signUp:c})]})})]})]})]})},Jt=n(61),Vt=n.n(Jt),Wt=function(e){var t=e.username,n=me(),r=xe();Object(a.useEffect)((function(){n(M(t))}),[t,n]);var o,c=Object(l.c)(ae),i=Object(l.c)(re);return o="idle"===i?c.length?c.map((function(e){return e.photos})).flat(1).map((function(e){return Object(v.jsx)(Mt,{url:e.url},e.id)})):Object(v.jsx)("div",{className:Vt.a.text,children:r("feed_no_posts")}):r("loading"===i?"general_loading":"general_error_loading"),Object(v.jsx)("div",{className:Vt.a.photoFeed,children:o})},Mt=function(e){var t=e.url;return Object(v.jsx)("div",{className:Vt.a.square,style:{backgroundImage:"url(".concat(t,")")}})},Gt=n(80),Xt=n.n(Gt),Yt=function(){var e=Object(d.h)().username,t=ve(_e);!function(){var e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),t=Object(x.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[])}();var n=Object(a.useState)(null),r=Object(x.a)(n,2),o=r[0],c=r[1],i=Object(a.useState)(""),s=Object(x.a)(i,2),l=s[0],u=s[1];if(Object(a.useEffect)((function(){e?o&&o.username===e||V(e).then((function(e){return c(e)})).catch((function(e){return u("Failed to get profile")})):c(t)}),[e,t,o]),!e&&!localStorage.getItem("auth"))return Object(v.jsx)(d.a,{to:"/login"});var f=!!o&&(null===t||void 0===t?void 0:t.username)===o.username;return Object(v.jsxs)("div",{className:Xt.a.ownProfile,children:[Object(v.jsx)(Be,{home:!0,profile:!f}),Object(v.jsx)("div",{className:Xt.a.content,children:l||(o?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ct,{profile:o,own:f,horizontal:Bt()}),Object(v.jsx)(Wt,{username:o.username})]}):"Failed to load profile")})]})};var Kt=function(){var e,t=me(),n=ve(F);return e=function(){t(S(n)),localStorage.getItem("auth")&&t(ie())},Object(a.useEffect)(e,[]),Object(v.jsx)(u.a,{children:Object(v.jsxs)(d.d,{children:[Object(v.jsx)(d.b,{exact:!0,path:"/login",children:Object(v.jsx)(Dt,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/profile/:username",children:Object(v.jsx)(Yt,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/profile",children:Object(v.jsx)(Yt,{})}),Object(v.jsx)(d.b,{exact:!0,path:"/",children:Object(v.jsx)(Ft,{})}),Object(v.jsx)(d.b,{children:Object(v.jsx)(d.a,{to:"/"})})]})})};n(279),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Qt(){var e=Lt?window.visualViewport.height:window.innerHeight;document.documentElement.style.setProperty("--vh100","".concat(e-1,"px"))}c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(l.a,{store:Ue,children:Object(v.jsx)(Kt,{})})}),document.getElementById("app")),s.a.setAppElement("#app"),Qt(),window.addEventListener("resize",(function(){Qt()})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},3:function(e,t,n){e.exports={profileInfo:"ProfileInfo_profileInfo__cLKJa",top:"ProfileInfo_top__3o043",followers:"ProfileInfo_followers__2Nu_-",following:"ProfileInfo_following__2ttTb",number:"ProfileInfo_number__Lj_2R",smallText:"ProfileInfo_smallText__XuTrR",bottom:"ProfileInfo_bottom__1S_qc",info:"ProfileInfo_info__3zEMb",description:"ProfileInfo_description__1hzwZ",actionButtons:"ProfileInfo_actionButtons__1207A",horizontal:"ProfileInfo_horizontal__1TlCv",name:"ProfileInfo_name__2Nwq-",job:"ProfileInfo_job__b60_r",separator:"ProfileInfo_separator__2VEdK",right:"ProfileInfo_right__1dEse",social:"ProfileInfo_social__17pXh"}},36:function(e,t,n){e.exports={button:"Button_button__Iv7O1",square:"Button_square__24Qg9",smallPadding:"Button_smallPadding__1s_AW",white:"Button_white__E8Wbq",blue:"Button_blue__1Yy1O",black:"Button_black__obrtp",lightBorder:"Button_lightBorder__pQOr6"}},37:function(e,t,n){e.exports={square:"Avatar_square__BGVCN",clickable:"Avatar_clickable__9RUE4",border:"Avatar_border__1fx0F",visible:"Avatar_visible__2JtjS",avatar:"Avatar_avatar__JOSFH"}},38:function(e,t,n){e.exports={feed:"Feed_feed__3hto0"}},39:function(e,t,n){e.exports={home:"Home_home__8bgC6",content:"Home_content__3Qx40",left:"Home_left__2wJ4m",right:"Home_right__3Vd87",sticky:"Home_sticky__2N9Pd"}},48:function(e,t,n){e.exports={footer:"Footer_footer__miWNG",buttonRow:"Footer_buttonRow__eb9fI",greyButton:"Footer_greyButton__1OzgT"}},49:function(e,t,n){e.exports={newPost:"NewPost_newPost__2t2ka",input:"NewPost_input__O7B-h",description:"NewPost_description__1_5So",buttons:"NewPost_buttons__2rXn9"}},61:function(e,t,n){e.exports={photoFeed:"PhotoFeed_photoFeed__1hn3a",square:"PhotoFeed_square__1VW1n"}},77:function(e,t,n){e.exports={file:"ImageInput_file__2jY1F",preview:"ImageInput_preview__3egAg"}},78:function(e,t,n){e.exports={overlay:"Modal_overlay__pTwNa",modal:"Modal_modal__16s7U"}},80:function(e,t,n){e.exports={ownProfile:"Profile_ownProfile__2Inxr",content:"Profile_content__1JwYV"}}},[[280,1,2]]]);
//# sourceMappingURL=main.ac9f16c7.chunk.js.map