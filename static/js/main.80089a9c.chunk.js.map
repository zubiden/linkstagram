{"version":3,"sources":["components/slider/Slider.module.scss","components/basic/button/IconButton.module.scss","components/basic/textarea/TextArea.module.scss","components/basic/input/Input.module.scss","components/posts/post/Post.module.scss","components/posts/modal/ModalPost.module.scss","components/profile/edit/ProfileEdit.module.scss","routes/login/Login.module.scss","components/header/Header.module.scss","components/basic/button/Button.tsx","slices/localizationSlice.ts","util/api.ts","slices/openedPostSlice.ts","slices/postsSlice.ts","slices/profileSlice.ts","util/hooks.ts","components/footer/Footer.tsx","components/basic/avatar/Avatar.tsx","components/header/Header.tsx","util/contants.ts","components/basic/button/IconButton.tsx","components/basic/modal/Modal.tsx","components/basic/textarea/TextArea.tsx","components/slider/Slider.tsx","slices/commentsSlice.ts","store.ts","util/date.ts","util/jsx.tsx","components/posts/comment/Comment.tsx","util/clipboard.js","components/basic/modal/Prompt.tsx","components/posts/post/Post.tsx","components/posts/modal/ModalPost.tsx","components/posts/toast/Toast.tsx","components/posts/feed/Feed.tsx","util/uppy.ts","components/basic/file/ImageInput.tsx","components/posts/new/NewPost.tsx","components/basic/input/Input.tsx","components/profile/edit/ProfileEdit.tsx","components/profile/info/ProfileInfo.tsx","components/stories/Stories.tsx","routes/home/Home.tsx","routes/login/Login.tsx","components/posts/feed/PhotoFeed.tsx","routes/profile/Profile.tsx","App.tsx","serviceWorker.ts","index.tsx","components/basic/button/Button.module.scss","components/basic/avatar/Avatar.module.scss","components/posts/comment/Comment.module.scss","components/posts/feed/Feed.module.scss","components/posts/new/NewPost.module.scss","routes/home/Home.module.scss","components/footer/Footer.module.scss","components/basic/modal/Modal.module.scss","components/posts/toast/Toast.module.scss","components/profile/info/ProfileInfo.module.scss","components/basic/modal/Prompt.module.scss","components/basic/file/ImageInput.module.scss","components/posts/feed/PhotoFeed.module.scss","components/stories/Stories.module.scss","routes/profile/Profile.module.scss"],"names":["module","exports","Button","color","lightBorder","square","to","className","children","smallPadding","onClick","otherArgs","history","useHistory","classNames","styles","button","ev","push","VALID_LANGUAGES","initialState","strings","code","localStorage","getItem","status","setLanguage","createAsyncThunk","thunkAPI","a","state","getState","selectTranslationStrings","Object","keys","length","selectLanguageCode","fetch","then","res","json","key","setItem","dispatch","setLanguageCode","Error","localizationSlice","createSlice","name","reducers","action","payload","extraReducers","builder","addCase","pending","fulfilled","actions","localization","API_BASE","login","data","method","body","JSON","stringify","headers","Headers","auth","get","removeItem","leaveComment","post_id","message","request","fetchComments","removeLike","setLike","fetchPost","id","fetchPosts","page","fetchUserPosts","username","fetchProfiles","fetchProfile","url","options","set","ok","text","parse","openPost","loadComments","leaveOwnComment","openedPostSlice","post","comments","postStatus","commentsStatus","closePost","setOpenedPost","rejected","selectOpenedPost","openedPost","selectOpenedComments","checkForNewPosts","_","selectCurrentPostsUsername","loadedPosts","selectLoadedPosts","firstPage","setNewPostsAvailable","fetchAllPosts","setCurrentPostsUsername","notEnd","posts","currentPage","downloaded","find","refetchPost","opened","likePost","dislikePost","deleteOwnPost","removePost","createOwnPost","params","postsSlice","currentPostsUsername","newPostsAvailable","filter","findIndex","selectPostsStatus","selectNewPostsAvailable","fetchAllProfiles","profiles","profile","fetchCurrentAccount","isError","account","updateAccount","newInfo","logout","arg","clearCurrentAccount","error","profileSlice","allProfiles","profilesFetchStatus","accountFetchStatus","resetAccountFetchStatus","selectProfiles","selectAccount","selectIsLoggedIn","selectIsLoggingIn","useAppDispatch","useDispatch","useAppSelector","useSelector","useAuthorization","loggedIn","loggingIn","func","useWindowSize","useState","width","window","innerWidth","height","innerHeight","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useLocalization","lp","replaces","count","defaultValue","undefined","isLocalizationParameters","value","found","replace","isLanguageValue","countToPluralCode","other","replacement","replaceAll","uk","en","Footer","footer","buttonRow","year","toString","GreyButton","greyButton","Avatar","size","border","clickable","style","visible","src","avatar","alt","Header","home","back","onBackClick","isLoggedIn","langCode","dropdownOptions","entries","map","label","option","header","logo","separator","onChange","dropdown","controlClassName","control","placeholderClassName","placeholder","menuClassName","menu","profile_photo_url","reserver","IS_DESKTOP","IS_SAFARI","test","navigator","userAgent","IconButton","icon","checkedColor","checked","iconButton","Modal","isOpen","onRequestClose","tabletExpand","mobileExpand","modal","overlayClassName","overlay","TextArea","otherParams","textArea","Slider","photos","sides","roundBorders","onCenterClick","index","setIndex","secondPrev","prev","current","next","secondNext","big","showPrev","stopPropagation","Math","max","showNext","min","slider","viewBox","photo","padded","direction","left","right","position","Array","fill","i","Point","point","CenteredButton","SliderPhoto","image","fetchAllComments","setCurrentPostId","commentsSlice","loadedComments","currentPostId","store","configureStore","reducer","postsReducer","openedPostReducer","profileReducer","commentsReducer","localizationReducer","getRelativeDateKey","timestamp","now","Date","getTime","diff","abs","minutes","floor","hours","date","toLocaleDateString","month","day","insertNewlines","arr","split","e","flat","pop","Comment","avatarSize","comment","commenter","column","first_name","last_name","time","created_at","copyTextToClipboard","clipboard","writeText","document","createElement","top","appendChild","focus","select","execCommand","err","console","removeChild","fallbackCopyTextToClipboard","Prompt","danger","onClose","onConfirm","prompt","buttons","Post","sliderSides","deletePrompt","setDeletePrompt","shared","setShared","setTimeout","clearTimeout","show","useContextMenu","requireAuth","copyLink","BASE_URL","author","info","more","content","sliderOverlay","description","likes_count","is_liked","share","ModalPost","postId","noImages","close","likes","padding","modalPost","Comments","setComment","like","newComment","minRows","input","currentTarget","Toast","toast","Feed","modalPostId","setModalPostId","showToast","setShowToast","setInterval","clearInterval","feed","getUppy","uppy","Uppy","restrictions","maxNumberOfFiles","allowedFileTypes","maxFileSize","use","AwsS3","companionUrl","addFile","file","type","source","transformFileData","files","meta","storage","metadata","filename","mime_type","ImageInput","accept","multiple","defaultPreviewUrl","onFailedFiles","onFilesSelected","inputRef","useRef","setFiles","getFiles","forEach","removeFile","failedFiles","ex","includes","preventEvent","preventDefault","click","onDragOver","onDragEnter","onDragLeave","onDrop","from","dataTransfer","preview","filesToPhotos","join","ref","hidden","target","URL","createObjectURL","NewPost","setDescription","setError","reset","newPost","el","upload","result","failed","successful","images","photos_attributes","Input","iconColor","ProfileEdit","firstName","setFirstName","secondName","setSecondName","job_title","jobTitle","setJobTitle","profileEdit","title","topBlock","avatarWrapper","avatarText","profile_photo","ProfileInfo","own","horizontal","isNewPostOpened","setNewPostOpened","isProfileEditOpened","setProfileEditOpened","nameString","profileInfo","job","social","followers","number","smallText","following","actionButtons","add","bottom","Stories","stories","scroll","Home","useParams","modalPostOpened","setModalPostOpened","Number","parseInt","sticky","SubmitButton","signUp","FormikWrapperInput","field","form","touched","errors","setFieldValue","values","otherProps","Login","setSignUp","schema","Yup","shape","email","required","matches","Promise","resolve","reject","catch","password","presentation","scrollable","float1","backgroundImage","float2","float3","authPane","initialValues","onSubmit","validationSchema","component","mobileSeparator","switch","inlineSwitch","PhotoFeed","photoFeed","ImageSquare","OwnProfile","setProfile","ownProfile","App","fun","exact","path","Profile","Boolean","location","hostname","match","setVH","vh","visualViewport","documentElement","setProperty","ReactDOM","render","StrictMode","getElementById","setAppElement","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.80089a9c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"slider\":\"Slider_slider__3A2az\",\"roundBorders\":\"Slider_roundBorders__N0UNE\",\"button\":\"Slider_button__17i9F\",\"right\":\"Slider_right__3IBug\",\"left\":\"Slider_left__1VHjc\",\"square\":\"Slider_square__2pq5e\",\"image\":\"Slider_image__29c0_\",\"big\":\"Slider_big__2_H5F\",\"prev\":\"Slider_prev__M5K3f\",\"next\":\"Slider_next__3jrG6\",\"current\":\"Slider_current__2MgGL\",\"padded\":\"Slider_padded__38C8D\",\"secondPrev\":\"Slider_secondPrev__3KNld\",\"secondNext\":\"Slider_secondNext__3sPlE\",\"position\":\"Slider_position__3QVNm\",\"point\":\"Slider_point__15Pih\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconButton\":\"IconButton_iconButton__1icvX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textArea\":\"TextArea_textArea__2zwX3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__3EuCO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__1te52\",\"header\":\"Post_header__3Gzyc\",\"info\":\"Post_info__Xy-Np\",\"name\":\"Post_name__3CpU5\",\"time\":\"Post_time__3_nO7\",\"more\":\"Post_more__14-xe\",\"content\":\"Post_content__22_-o\",\"sliderOverlay\":\"Post_sliderOverlay__3XfQ8\",\"shared\":\"Post_shared__1F8yg\",\"slider\":\"Post_slider__3Le8I\",\"description\":\"Post_description__3kjSL\",\"footer\":\"Post_footer__3xwoU\",\"iconButton\":\"Post_iconButton__3cLRW\",\"separator\":\"Post_separator__1SbIb\",\"share\":\"Post_share__287j5\",\"danger\":\"Post_danger__2HN30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalPost\":\"ModalPost_modalPost__1L6RD\",\"slider\":\"ModalPost_slider__gPdCv\",\"noImages\":\"ModalPost_noImages__ax5Gw\",\"data\":\"ModalPost_data__2zYZ2\",\"header\":\"ModalPost_header__3ZVGN\",\"avatar\":\"ModalPost_avatar__tcw-M\",\"name\":\"ModalPost_name__n-uyA\",\"separator\":\"ModalPost_separator__YWCJ7\",\"close\":\"ModalPost_close__2Vn61\",\"buttons\":\"ModalPost_buttons__3--uR\",\"like\":\"ModalPost_like__3KuAn\",\"comments\":\"ModalPost_comments__1y2kU\",\"padding\":\"ModalPost_padding__19rl7\",\"comment\":\"ModalPost_comment__1_-Yh\",\"newComment\":\"ModalPost_newComment__1i5qe\",\"input\":\"ModalPost_input__1PuuI\",\"post\":\"ModalPost_post__2sug1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileEdit\":\"ProfileEdit_profileEdit__iDLMl\",\"header\":\"ProfileEdit_header__3Idmi\",\"title\":\"ProfileEdit_title__2TGIH\",\"logout\":\"ProfileEdit_logout__2m76b\",\"topBlock\":\"ProfileEdit_topBlock__ETWyG\",\"avatarWrapper\":\"ProfileEdit_avatarWrapper__1XsL3\",\"avatar\":\"ProfileEdit_avatar__1SRbI\",\"avatarText\":\"ProfileEdit_avatarText__2toBy\",\"name\":\"ProfileEdit_name__2mX0L\",\"input\":\"ProfileEdit_input__L2H48\",\"description\":\"ProfileEdit_description__3JWjj\",\"buttons\":\"ProfileEdit_buttons__1p7ap\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__ouCTB\",\"content\":\"Login_content__3YGvZ\",\"presentation\":\"Login_presentation__145vV\",\"scrollable\":\"Login_scrollable__arfto\",\"profile\":\"Login_profile__3UHv_\",\"float1\":\"Login_float1__JNb_A\",\"float2\":\"Login_float2__26i3K\",\"float3\":\"Login_float3__1yQQa\",\"authPane\":\"Login_authPane__IHzBx\",\"title\":\"Login_title__3VCx7\",\"input\":\"Login_input__2gh-1\",\"button\":\"Login_button__2Vpm8\",\"error\":\"Login_error__3SyBg\",\"mobileSeparator\":\"Login_mobileSeparator___RmK7\",\"switch\":\"Login_switch__4MshC\",\"inlineSwitch\":\"Login_inlineSwitch__1ywMx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1fCsm\",\"logo\":\"Header_logo__2gAbO\",\"back\":\"Header_back__1F8AG\",\"separator\":\"Header_separator__wmxr4\",\"button\":\"Header_button__1JOra\",\"dropdown\":\"Header_dropdown__39YJG\",\"control\":\"Header_control__tUaTp\",\"placeholder\":\"Header_placeholder__20Sp9\",\"menu\":\"Header_menu__1bgN5\",\"option\":\"Header_option__1oXVO\",\"reserver\":\"Header_reserver__iHJu7\"};","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styles from \"./Button.module.scss\";\n\ninterface ButtonParameters extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n    color?: \"blue\" | \"black\" | \"white\" | \"red\"\n    lightBorder?: boolean\n    square?: boolean\n    smallPadding?: boolean\n    className?: string\n    to?: string\n    [key: string]: any\n}\n\nexport const Button: FC<ButtonParameters> = (\n    {\n        color = \"white\",\n        lightBorder = false,\n        square = false, \n        to,\n        className,\n        children,\n        smallPadding = false,\n        onClick,\n        ...otherArgs\n    }) => {\n    const history = useHistory();\n\n    return (\n        <button className={classNames({\n            [styles.button]: true,\n            [styles[color]]: true,\n            [styles.square]: square,\n            [styles.lightBorder]: lightBorder,\n            [styles.smallPadding]: smallPadding\n        }, className)}\n            onClick={ev => {\n                onClick?.(ev);\n                if (to) history.push(to);\n            }}\n            {...otherArgs}>\n            {children}\n        </button>\n    )\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { LanguageValue } from \"../types\";\n\nexport const LANGUAGE_FOLDER = \"language\";\n\nexport const VALID_LANGUAGES: { [key: string]: string } = {\n    \"uk\": \"UA\",\n    \"en\": \"EN\"\n}\n\nexport interface StringsMap {\n    [key: string]: string | LanguageValue\n}\n\nexport interface LocalizationState {\n    strings: StringsMap\n    code: string\n    status: \"idle\" | \"loading\" | \"failed\";\n}\n\nconst initialState: LocalizationState = {\n    strings: {},\n    code: localStorage.getItem(\"langCode\") || \"en\",\n    status: \"idle\",\n}\n\nexport const setLanguage = createAsyncThunk(\n    \"localization/setLanguage\",\n    async (code: string, thunkAPI) => {\n        if (code in VALID_LANGUAGES) {\n            const state = thunkAPI.getState() as RootState;\n            const strings = selectTranslationStrings(state);\n            if(Object.keys(strings).length && code === selectLanguageCode(state)) {\n                return strings; // don't make request to fetch active language\n            }\n            \n            return fetch(`${LANGUAGE_FOLDER}/${code}.json`)\n                .then(res => res.json())\n                .then(json => {\n                    let strings: StringsMap = {};\n                    for (let key in json) {\n                        strings[key] = json[key];\n                    }\n\n                    localStorage.setItem(\"langCode\", code);\n                    thunkAPI.dispatch(setLanguageCode(code));\n\n                    return strings;\n                });\n        } else {\n            throw new Error(\"Not a valid language!\");\n        }\n    }\n);\n\nconst localizationSlice = createSlice({\n    name: \"localization\",\n    initialState,\n    reducers: {\n        setLanguageCode(state, action: PayloadAction<string>) {\n            state.code = action.payload\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(setLanguage.pending, (state) => {\n            state.status = \"loading\";\n        }).addCase(setLanguage.fulfilled, (state, action) => {\n            state.status = \"idle\";\n            state.strings = action.payload;\n        })\n    },\n})\n\n// Reducer\nexport default localizationSlice.reducer;\n\n// Actions\nconst { setLanguageCode } = localizationSlice.actions;\n\n//Selectors\n\nexport const selectLanguageCode = (state: RootState) => state.localization.code;\nexport const selectTranslationStrings = (state: RootState) => state.localization.strings;","import { IComment, IImage, IPhotosAttribute, IPost, IProfile } from \"../types\";\n\nexport const API_BASE = \"https://linkstagram-api.ga\";\n\n// API-SPECIFIC TYPES\n\nexport interface ILoginError {\n    \"field-error\": string[],\n    error: string\n}\n\nexport interface ISuccess {\n    success: string\n}\n\nexport interface IError {\n    error: string\n}\n\nexport interface IRegistrationParameters {\n    username: string;\n    login: string;\n    password: string;\n}\n\nexport interface ILoginParameters {\n    login: string;\n    password: string;\n}\n\nexport interface IPostCreationParameters {\n    description?: string;\n    photos_attributes: IPhotosAttribute[];\n}\n\nexport interface IProfileUpdateParameters {\n    username?: string;\n    description?: string;\n    first_name?: string;\n    job_title?: string;\n    last_name?: string;\n    profile_photo?: IImage;\n}\n\n// AUTH\n\nexport const createAccount = (data: IRegistrationParameters): Promise<ILoginError | ISuccess> => {\n    return fetch(`${API_BASE}/create-account`, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: new Headers({\n            \"Content-Type\": \"application/json\"\n        })\n    }).then(res => {\n        const headers = res.headers;\n        const auth = headers.get(\"authorization\");\n        if (auth) {\n            localStorage.setItem(\"auth\", auth);\n        } else {\n            localStorage.removeItem(\"auth\"); // login error, clear previous auth\n        }\n        return res.json();\n    });\n}\n\nexport const login = (data: ILoginParameters): Promise<ILoginError | ISuccess> => {\n    return fetch(`${API_BASE}/login`, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: new Headers({\n            \"Content-Type\": \"application/json\"\n        })\n    }).then(res => {\n        const headers = res.headers;\n        const auth = headers.get(\"authorization\");\n        if (auth) {\n            localStorage.setItem(\"auth\", auth);\n        } else {\n            localStorage.removeItem(\"auth\"); // login error, clear previous auth\n        }\n        return res.json();\n    });\n}\n\n// COMMENTS\n\nexport const leaveComment = (post_id: number, message: string): Promise<IComment> => {\n    return request(`${API_BASE}/posts/${post_id}/comments`, \"POST\", { message });\n}\n\nexport const fetchComments = (post_id: number): Promise<IComment[]> => {\n    return request(`${API_BASE}/posts/${post_id}/comments`);\n}\n\n// ACCOUNT\n\nexport const fetchAccount = (): Promise<IProfile | IError> => {\n    return request(`${API_BASE}/account`);\n}\n\nexport const editAccount = (account: IProfileUpdateParameters): Promise<IProfile | IError> => {\n    return request(`${API_BASE}/account`, \"PATCH\", { account });\n}\n\n// LIKES\n\nexport const removeLike = (post_id: number): Promise<{} | IError> => {\n    return request(`${API_BASE}/posts/${post_id}/like`, \"DELETE\");\n}\n\nexport const setLike = (post_id: number): Promise<{} | IError> => {\n    return request(`${API_BASE}/posts/${post_id}/like`, \"POST\");\n}\n\n// POSTS\n\nexport const createPost = (post: IPostCreationParameters): Promise<IPost> => {\n    return request(`${API_BASE}/posts`, \"POST\", { post });\n}\n\nexport const deletePost = (id: number): Promise<ISuccess | IError> => {\n    return request(`${API_BASE}/posts/${id}`, \"DELETE\");\n}\n\nexport const fetchPost = (id: number): Promise<IPost> => {\n    return request(`${API_BASE}/posts/${id}`);\n}\n\nexport const fetchPosts = (page: number = 1): Promise<IPost[]> => {\n    return request(`${API_BASE}/posts?page=${page}`);\n}\n\nexport const fetchUserPosts = (username: string, page: number = 1): Promise<IPost[]> => {\n    return request(`${API_BASE}/profiles/${username}/posts?page=${page}`);\n}\n\n// PROFILES\n\nexport const fetchProfiles = (page: number = 1): Promise<IProfile[]> => {\n    return request(`${API_BASE}/profiles?page=${page}`);\n}\n\nexport const fetchProfile = (username: string): Promise<IProfile> => {\n    return request(`${API_BASE}/profiles/${username}`);\n}\n\n// UTIL\n\nconst request = (url: string, method: \"GET\" | \"POST\" | \"PATCH\" | \"DELETE\" = \"GET\", data: any = null): Promise<any> => {\n    let options: RequestInit = {\n        method\n    };\n\n    options.headers = new Headers({\n        \"Content-Type\": \"application/json\"\n    })\n\n    if (data) {\n        options.body = JSON.stringify(data);\n    }\n\n    const auth = localStorage.getItem(\"auth\");\n    if (auth) {\n        options.headers.set(\"Authorization\", \"Bearer \" + auth);\n    }\n    return fetch(url, options).then(res => {\n        if(!res.ok) throw Error();\n        return res.text()\n    }).then(text => {\n        if (text.length === 0) return {}\n        return JSON.parse(text);\n    });\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { IComment, IPost } from \"../types\";\nimport { fetchComments, fetchPost, leaveComment } from \"../util/api\";\n\nexport interface OpenedPostState {\n    post: IPost | null;\n    comments: IComment[]\n    postStatus: \"idle\" | \"loading\" | \"failed\";\n    commentsStatus: \"idle\" | \"loading\" | \"failed\";\n}\n\nconst initialState: OpenedPostState = {\n    post: null,\n    comments: [],\n    postStatus: \"idle\",\n    commentsStatus: \"idle\"\n}\n\nexport const openPost = createAsyncThunk(\n    \"openedPost/openPost\",\n    async (post_id: number, thunkAPI) => {\n        return fetchPost(post_id).then(json => {\n            // load comments after post\n            thunkAPI.dispatch(loadComments(json.id));\n            return json;\n        })\n    }\n);\n\nexport const loadComments = createAsyncThunk(\n    \"openedPost/loadComments\",\n    async (post_id: number, thunkAPI) => {\n        return fetchComments(post_id);\n    }\n);\n\nexport const leaveOwnComment = createAsyncThunk(\n    \"openedPost/leaveComment\",\n    async ({post_id, message}: {post_id: number, message: string}, thunkAPI) => {\n        if(!message) return;\n        await leaveComment(post_id, message);\n        thunkAPI.dispatch(loadComments(post_id));\n    }\n);\n\nconst openedPostSlice = createSlice({\n    name: \"openedPost\",\n    initialState,\n    reducers: {\n        closePost(state) {\n            state.post = null;\n            state.comments = [];\n        },\n        setOpenedPost(state, action: PayloadAction<IPost>) {\n            state.post = action.payload\n            state.postStatus = \"idle\"\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n        .addCase(openPost.pending, (state) => {\n            state.postStatus = \"loading\";\n            state.post = null;\n        }).addCase(openPost.fulfilled, (state, action) => {\n            state.postStatus = \"idle\";\n            state.post = action.payload;\n        }).addCase(openPost.rejected, (state) => {\n            state.postStatus = \"failed\";\n        })\n        .addCase(loadComments.pending, (state) => {\n            state.commentsStatus = \"loading\";\n            state.comments = [];\n        }).addCase(loadComments.fulfilled, (state, action) => {\n            state.commentsStatus = \"idle\";\n            state.comments = action.payload;\n        }).addCase(loadComments.rejected, (state) => {\n            state.commentsStatus = \"failed\";\n        })\n    },\n})\n\n// Reducer\nexport default openedPostSlice.reducer;\n\n// Actions\nexport const {closePost, setOpenedPost } = openedPostSlice.actions;\n\n//Selectors\nexport const selectOpenedPost = (state: RootState) => state.openedPost.post;\nexport const selectOpenedComments = (state: RootState) => state.openedPost.comments;\nexport const selectOpenedPostStatus = (state: RootState) => state.openedPost.postStatus;\nexport const selectOpenedCommentsStatus = (state: RootState) => state.openedPost.commentsStatus;","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { IPost } from \"../types\";\nimport { createPost, deletePost, fetchPost, fetchPosts, fetchUserPosts, IPostCreationParameters, removeLike, setLike } from \"../util/api\";\nimport { selectOpenedPost, setOpenedPost } from \"./openedPostSlice\";\n\nexport interface PostsState {\n    loadedPosts: IPost[];\n    currentPostsUsername: string | null;\n    newPostsAvailable: boolean\n    status: \"idle\" | \"loading\" | \"failed\";\n}\n\nconst initialState: PostsState = {\n    loadedPosts: [],\n    currentPostsUsername: null,\n    newPostsAvailable: false,\n    status: \"idle\",\n}\n\nexport const checkForNewPosts = createAsyncThunk(\n    \"posts/check\",\n    async (_, thunkAPI) => {\n        const state = thunkAPI.getState() as RootState;\n        const username = selectCurrentPostsUsername(state);\n        const loadedPosts = selectLoadedPosts(state);\n        const firstPage = await (!!username ? fetchUserPosts(username, 1) : fetchPosts(1));\n        thunkAPI.dispatch(setNewPostsAvailable(firstPage[0].id > loadedPosts[0].id));\n    }\n);\n\nexport const fetchAllPosts = createAsyncThunk(\n    \"posts/fetchAllPosts\",\n    async (username: string | null | undefined, thunkAPI) => {\n        thunkAPI.dispatch(setCurrentPostsUsername(username || null));\n        // DANGER! Possibly, a lot of requests if Linkstagram decides to get several million new posts\n        // TODO load posts on demand\n        let notEnd = true;\n        let posts: IPost[] = [];\n        let currentPage = 1;\n        while(notEnd) {\n            const downloaded = await (!!username ? fetchUserPosts(username, currentPage) : fetchPosts(currentPage));\n            if(downloaded.length && !posts.find(post => post.id === downloaded[0].id)) {\n                posts.push(...downloaded);\n            } else {\n                notEnd = false;\n            }\n            currentPage++;\n        }\n        return posts;  \n\n    }\n);\n\nexport const refetchPost = createAsyncThunk(\n    \"posts/fetchPost\",\n    async (post_id: number, thunkAPI) => {\n        const post = await fetchPost(post_id);\n        // update opened post on refetch\n        const opened = selectOpenedPost(thunkAPI.getState() as RootState);\n        if(opened?.id === post.id) thunkAPI.dispatch(setOpenedPost(post));\n\n        return post;\n    }\n);\n\nexport const likePost = createAsyncThunk(\n    \"posts/like\",\n    async (post_id: number, thunkAPI) => {\n        await setLike(post_id);\n        thunkAPI.dispatch(refetchPost(post_id));\n    }\n);\n\nexport const dislikePost = createAsyncThunk(\n    \"posts/dislike\",\n    async (post_id: number, thunkAPI) => {\n        await removeLike(post_id);\n        thunkAPI.dispatch(refetchPost(post_id));\n    }\n);\n\nexport const deleteOwnPost = createAsyncThunk(\n    \"posts/delete\",\n    async (post_id: number, thunkAPI) => {\n        await deletePost(post_id);\n        thunkAPI.dispatch(removePost(post_id));\n    }\n);\n\nexport const createOwnPost = createAsyncThunk(\n    \"posts/post\",\n    async (params: IPostCreationParameters, thunkAPI) => {\n        await createPost(params);\n\n        // TODO: refractor?\n        thunkAPI.dispatch(fetchAllPosts(selectCurrentPostsUsername(thunkAPI.getState() as RootState)));\n    }\n);\n\nconst postsSlice = createSlice({\n    name: \"posts\",\n    initialState,\n    reducers: {\n        setCurrentPostsUsername(state, action: PayloadAction<string | null>) {\n            state.currentPostsUsername = action.payload\n        },\n        removePost(state, action: PayloadAction<number>) {\n            state.loadedPosts = state.loadedPosts.filter(post => post.id !== action.payload);\n        },\n        setNewPostsAvailable(state, action: PayloadAction<boolean>) {\n            state.newPostsAvailable = action.payload;\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n        .addCase(fetchAllPosts.pending, (state) => {\n            state.status = \"loading\";\n            state.loadedPosts = [];\n        }).addCase(fetchAllPosts.fulfilled, (state, action) => {\n            state.status = \"idle\";\n            state.loadedPosts = action.payload;\n            state.newPostsAvailable = false;\n        }).addCase(fetchAllPosts.rejected, (state) => {\n            state.status = \"failed\";\n        })\n        .addCase(refetchPost.fulfilled, (state, action) => {\n            const id = state.loadedPosts.findIndex(post => post.id === action.payload.id);\n            if(id !== -1) { // post is currently in state\n                state.loadedPosts[id] = action.payload;\n            }\n        })\n    },\n})\n\n// Reducer\nexport default postsSlice.reducer;\n\n// Actions\nconst { setCurrentPostsUsername, removePost, setNewPostsAvailable } = postsSlice.actions;\n\n//Selectors\n\nexport const selectLoadedPosts = (state: RootState) => state.posts.loadedPosts;\nexport const selectPostsStatus = (state: RootState) => state.posts.status;\nexport const selectCurrentPostsUsername = (state: RootState) => state.posts.currentPostsUsername;\nexport const selectNewPostsAvailable = (state: RootState) => state.posts.newPostsAvailable;","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { IProfile } from \"../types\";\nimport { editAccount, fetchAccount, fetchProfiles, IError, IProfileUpdateParameters } from \"../util/api\";\nimport { fetchAllPosts, selectCurrentPostsUsername } from \"./postsSlice\";\n\nexport interface ProfileState {\n    account: IProfile | null;\n    allProfiles: IProfile[]\n    profilesFetchStatus: \"idle\" | \"loading\" | \"failed\";\n    accountFetchStatus: \"idle\" | \"loading\" | \"failed\";\n}\n\nconst initialState: ProfileState = {\n    account: null,\n    allProfiles: [],\n    profilesFetchStatus: \"idle\",\n    accountFetchStatus: \"idle\"\n}\n\nexport const fetchAllProfiles = createAsyncThunk(\n    \"profile/fetchAllProfiles\",\n    async () => {\n        // DANGER! Possibly, a lot of requests if Linkstagram decides to get several million new users\n        // but probably the best way to do this as of right now\n        let notEnd = true;\n        let profiles: IProfile[] = [];\n        let currentPage = 1;\n        while(notEnd) {\n            const downloaded = await fetchProfiles(currentPage);\n\n            if(downloaded.length && !profiles.find(profile => profile.username === downloaded[0].username)) {\n                profiles.push(...downloaded);\n            } else {\n                notEnd = false;\n            }\n            currentPage++;\n        }\n        return profiles;\n    }\n);\n\nexport const fetchCurrentAccount = createAsyncThunk(\n    \"profile/fetchAccount\",\n    async () => {\n        const account = await fetchAccount();\n        if(isError(account)) {\n            return null;\n        } else {\n            return account;\n        }\n    }\n);\n\nexport const updateAccount = createAsyncThunk(\n    \"profile/updateAccount\",\n    async (newInfo: IProfileUpdateParameters, thunkAPI) => {\n        const res = await editAccount(newInfo);\n        if(isError(res)) {\n            throw Error(\"Failed to update account\")\n        } else {\n            thunkAPI.dispatch(fetchAllPosts(selectCurrentPostsUsername(thunkAPI.getState() as RootState)));\n            return res;\n        }\n    }\n);\n\nexport const logout = createAsyncThunk(\n    \"profile/logount\",\n    async (arg, thunkAPI) => {\n        localStorage.removeItem(\"auth\");\n        thunkAPI.dispatch(clearCurrentAccount());\n        thunkAPI.dispatch(fetchAllPosts()); // refetch posts to remove likes\n    }\n);\n\nfunction isError(res: any): res is IError {\n    return !!(res as IError).error;\n}\n\nconst profileSlice = createSlice({\n    name: \"profile\",\n    initialState,\n    reducers: {\n        clearCurrentAccount(state) {\n            state.account = null;\n        },\n\n        resetAccountFetchStatus(state) {\n            state.accountFetchStatus = \"idle\";\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n        // profiles\n        .addCase(fetchAllProfiles.pending, (state) => {\n            state.profilesFetchStatus = \"loading\";\n        }).addCase(fetchAllProfiles.fulfilled, (state, action) => {\n            state.profilesFetchStatus = \"idle\";\n            state.allProfiles = action.payload;\n        }).addCase(fetchAllProfiles.rejected, (state) => {\n            state.profilesFetchStatus = \"failed\";\n            state.allProfiles = [];\n        })\n        // account\n        .addCase(fetchCurrentAccount.pending, (state) => {\n            state.accountFetchStatus = \"loading\";\n        }).addCase(fetchCurrentAccount.fulfilled, (state, action) => {\n            state.accountFetchStatus = \"idle\";\n            state.account = action.payload;\n        }).addCase(fetchCurrentAccount.rejected, (state) => {\n            state.accountFetchStatus = \"failed\";\n            state.account = null;\n        })\n        .addCase(updateAccount.fulfilled, (state, action) => {\n            state.account = action.payload\n        })\n    },\n})\n\n// Reducer\nexport default profileSlice.reducer;\n\n// Actions\nexport const { clearCurrentAccount, resetAccountFetchStatus } = profileSlice.actions;\n\n// Selectors\nexport const selectProfiles = (state: RootState) => state.profile.allProfiles;\nexport const selectProfilesFetchStatus = (state: RootState) => state.profile.profilesFetchStatus;\nexport const selectAccount = (state: RootState) => state.profile.account;\nexport const selectAccountFetchStatus = (state: RootState) => state.profile.accountFetchStatus;\nexport const selectIsLoggedIn = (state: RootState) => !!state.profile.account;\nexport const selectIsLoggingIn = (state: RootState) => state.profile.accountFetchStatus === \"loading\";\n","import { en, PluralCategory, uk } from \"make-plural\";\nimport { EffectCallback, useEffect, useState } from \"react\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from \"react-router-dom\";\nimport { selectLanguageCode, selectTranslationStrings } from '../slices/localizationSlice';\nimport { selectIsLoggedIn, selectIsLoggingIn } from \"../slices/profileSlice\";\nimport type { AppDispatch, RootState } from '../store';\nimport { LanguageValue, LocalizationParameters } from '../types';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n\n// eslint-disable-next-line react-hooks/exhaustive-deps\nexport const useMountEffect = (fun: EffectCallback) => useEffect(fun, []);\n\nexport const useAuthorization = () => {\n    const loggedIn = useAppSelector(selectIsLoggedIn);\n    const loggingIn = useAppSelector(selectIsLoggingIn);\n    const history = useHistory();\n\n    return (func?: Function) => {\n        if (loggingIn) return; // no account is available at this moment\n        if (loggedIn) {\n            func?.()\n        } else {\n            history.push(\"/login\");\n        }\n    }\n}\n\nexport const useWindowSize = () => {\n    const [windowSize, setWindowSize] = useState({\n        width: window.innerWidth,\n        height: window.innerHeight,\n    });\n    useEffect(() => {\n        function handleResize() {\n            setWindowSize({\n                width: window.innerWidth,\n                height: window.innerHeight,\n            });\n        }\n        window.addEventListener(\"resize\", handleResize);\n        handleResize();\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, []);\n    return windowSize;\n}\n\nexport const useLocalization = () => {\n    const strings = useAppSelector(selectTranslationStrings);\n    const code = useAppSelector(selectLanguageCode);\n\n    const lp = (key: LocalizationParameters | string = \"NO_TRANSLATION_KEY_PROVIDED\", replaces: { [key: string]: string } = {}, count: number = 1, defaultValue: string | undefined = undefined): string => {\n        if (isLocalizationParameters(key)) return lp(key.key, key.replaces, key.count, key.defaultValue);\n        let value = strings[key];\n        if (!value) {\n            return defaultValue || key;\n        }\n\n        let found = key;\n        if (isLanguageValue(value)) {\n            found = value[countToPluralCode(code, count)] || value.other;\n        } else {\n            found = value;\n        }\n\n        for (let replace in replaces) {\n            let replacement = replaces[replace];\n            found = found.replaceAll(`{${replace}}`, replacement);\n        }\n        return found;\n    }\n\n    return lp;\n}\n\nconst countToPluralCode = (code: string, count: number): PluralCategory => {\n    const plurals: { [key: string]: (n: number | string, ord?: boolean) => PluralCategory } = {\n        \"uk\": uk,\n        \"en\": en\n    }\n    return plurals[code](count);\n}\n\n// TODO autogenerate guards based on fields and accept any\n// move from hooks\nexport const isLocalizationParameters = (key: LocalizationParameters | string): key is LocalizationParameters => {\n    return (key as string).length === undefined;\n}\n\nexport const isLanguageValue = (value: LanguageValue | string): value is LanguageValue => {\n    return (value as string).length === undefined;\n}","import { FC } from \"react\";\nimport { useLocalization } from \"../../util/hooks\";\nimport styles from \"./Footer.module.scss\";\n\nconst CURRENT_YEAR = 2021;\n\nexport const Footer: FC = () => {\n    const lp = useLocalization();\n\n    return (\n        <footer className={styles.footer}>\n            <div className={styles.buttonRow}>\n                <GreyButton text={lp(\"footer_about\")}/>\n                <GreyButton text={lp(\"footer_help\")}/>\n                <GreyButton text={lp(\"footer_privacy\")}/>\n                <GreyButton text={lp(\"footer_terms\")}/>\n                <GreyButton text={lp(\"footer_locations\")}/>\n                <GreyButton text={lp(\"footer_language\")}/>\n            </div>\n            <div className={styles.buttonRow}>\n                <GreyButton text={lp(\"footer_copyright\", {year: CURRENT_YEAR.toString()})}/>\n            </div>\n        </footer>\n    )\n}\n\nconst GreyButton: FC<{text: string}> = ({text}) => {\n    return <div className={styles.greyButton}>{text}</div>\n}","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styles from \"./Avatar.module.scss\";\n\ninterface AvatarParameters extends React.HTMLAttributes<HTMLDivElement> {\n    url?: string,\n    size?: string,\n    border?: boolean\n    className?: string\n    to?: string\n    clickable?: boolean\n}\n\nconst PLACEHOLDER = \"images/placeholder.png\";\n\nexport const Avatar: FC<AvatarParameters> = ({url, size = \"4em\", border = false, clickable, to, className, onClick, ...otherArgs}) => {\n    url = url || PLACEHOLDER; // url can be null\n    clickable = clickable || !!to || !!onClick;\n    const history = useHistory();\n    return (\n        <div className={classNames({\n            [styles.square]: true,\n            [styles.clickable]: clickable\n        }, className)} style={{width: size}} onClick={ev => {\n            onClick?.(ev);\n            if (to) history.push(to);\n        }} {...otherArgs}>\n            <div className={classNames({\n                [styles.border]: true,\n                [styles.visible]: border\n            })}>\n                <img src={url} className={styles.avatar} alt=\"Avatar\"/>\n            </div>\n        </div>\n    )\n}","import { FC, MouseEventHandler } from \"react\";\nimport Dropdown from 'react-dropdown';\nimport { Link } from \"react-router-dom\";\nimport { selectLanguageCode, setLanguage, VALID_LANGUAGES } from \"../../slices/localizationSlice\";\nimport { selectAccount, selectIsLoggedIn } from \"../../slices/profileSlice\";\nimport { IProfile } from \"../../types\";\nimport { useAppDispatch, useAppSelector, useLocalization } from \"../../util/hooks\";\nimport { Avatar } from \"./../basic/avatar/Avatar\";\nimport { Button } from \"./../basic/button/Button\";\nimport styles from \"./Header.module.scss\";\n\ntype HeaderParameters = {\n    home?: boolean\n    profile?: boolean\n    login?: boolean\n    back?: boolean\n    onBackClick?: MouseEventHandler<HTMLElement>\n}\n\nexport const Header: FC<HeaderParameters> = ({home = false, profile = false, login = false, back = false, onBackClick}) => {\n    const dispatch = useAppDispatch();\n    const lp = useLocalization();\n\n    const isLoggedIn = useAppSelector(selectIsLoggedIn);\n    const account = useAppSelector(selectAccount) as IProfile;\n    const langCode = useAppSelector(selectLanguageCode);\n\n    const dropdownOptions = Object.entries(VALID_LANGUAGES).map(([key, value]) => ({value: key, label: value, className: styles.option}));\n\n    return (\n        <>\n        <header className={styles.header}>\n            { back ? <i className={`icon icon-arrow ${styles.back}`} onClick={onBackClick}/> : <Link to=\"/\" className={styles.logo}>Linkstagram</Link>}\n            <div className={styles.separator}/>\n            {home && <Button color=\"black\" className={styles.button} to=\"/\">{lp(\"header_home\")}</Button>}\n            <Dropdown \n                options={dropdownOptions} \n                value={VALID_LANGUAGES[langCode]} \n                onChange={option => dispatch(setLanguage(option.value))}\n                className={styles.dropdown}\n                controlClassName={styles.control}\n                placeholderClassName={styles.placeholder}\n                menuClassName={styles.menu}\n            />\n            {login && !isLoggedIn && <Button color=\"black\" className={styles.button} to=\"/login\">{lp(\"general_login\")}</Button>}\n            {profile && isLoggedIn && <Avatar url={account.profile_photo_url} size=\"2.5em\" to=\"/profile\"/>}\n        </header>\n        <div className={styles.reserver}/>\n        </>\n    )\n}","\nexport const TABLET_WIDTH = 512;\nexport const DESKTOP_WIDTH = 1014;\n\nexport const IS_DESKTOP = () => window.innerWidth >= DESKTOP_WIDTH;\nexport const IS_TABLET = () => window.innerWidth >= TABLET_WIDTH && window.innerWidth < DESKTOP_WIDTH;\nexport const IS_MOBILE = () => window.innerWidth < TABLET_WIDTH;\n\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); //browsers usually don't change at runtime\n\nexport const BASE_URL = \"https://zubiden.github.io/linkstagram\";","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport styles from \"./IconButton.module.scss\";\n\ninterface IconButtonParameters extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n    icon: string\n    checked?: boolean\n    checkedColor?: \"grey\" | \"red\"\n    text?: string\n    className?: string\n}\n\nexport const IconButton: FC<IconButtonParameters> = (\n    {\n        icon,\n        text,\n        checkedColor = \"red\",\n        checked = false,\n        className,\n        ...otherArgs\n    }) => {\n\n    return (\n        <button className={classNames({\n            [styles.iconButton]: true,\n        }, className)} {...otherArgs}>\n            <i className={classNames({\n                \"icon\": true,\n                [`icon-${icon}`]: true,\n                [checkedColor]: checked\n            })}/>\n            <span>{text}</span>\n        </button>\n    )\n}","import classNames from \"classnames\";\nimport { FC, MouseEventHandler } from \"react\";\nimport ReactModal from \"react-modal\";\nimport styles from \"./Modal.module.scss\";\n\ntype ModalParameters = {\n    isOpen: boolean\n    className?: string\n    tabletExpand?: boolean\n    mobileExpand?: boolean\n    onRequestClose?: MouseEventHandler<HTMLElement>\n}\n\nexport const Modal: FC<ModalParameters> = ({isOpen, onRequestClose, className, tabletExpand = false, mobileExpand = true, children}) => {\n    return (\n        <ReactModal \n            className={classNames({\n                [styles.modal]: true,\n                [styles.tabletExpand]: tabletExpand,\n                [styles.mobileExpand]: mobileExpand\n            }, className)} \n            overlayClassName={styles.overlay} \n            isOpen={isOpen} \n            onRequestClose={onRequestClose}\n        >\n            {children}\n        </ReactModal>\n    )\n}","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport TextareaAutosize, { TextareaAutosizeProps } from 'react-textarea-autosize';\nimport styles from \"./TextArea.module.scss\";\n\ninterface TextAreaParameters extends TextareaAutosizeProps{\n    label?: string\n    placeholder?: string\n    className?: string\n    [key: string]: any\n}\n\nexport const TextArea: FC<TextAreaParameters> = ({label, placeholder, className, ...otherParams}) => {\n    return (\n        <label className={classNames({\n            [styles.textArea]: true\n            }, className)}\n        >\n            {label}\n            <TextareaAutosize placeholder={placeholder} {...otherParams}/>\n        </label>\n    )\n}","import classNames from \"classnames\";\nimport { FC, MouseEventHandler, useEffect, useState } from \"react\";\nimport { IPhoto } from \"../../types\";\nimport styles from \"./Slider.module.scss\";\n\ntype SliderProps = {\n    photos: IPhoto[]\n    onCenterClick?: MouseEventHandler<HTMLElement>\n    className?: string\n    sides?: boolean\n    roundBorders?: boolean\n}\n\nexport const Slider: FC<SliderProps> = ({ photos, sides = false, roundBorders, onCenterClick, className }) => {\n    const [index, setIndex] = useState(0);\n\n    const secondPrev = (index === photos.length - 1) ? photos[index - 2] : null;\n    const prev = (index > 0) ? photos[index - 1] : null;\n    const current = photos[index];\n    const next = (index < (photos.length - 1)) ? photos[index + 1] : null;\n    const secondNext = (index === 0 && photos.length > 2) ? photos[index + 2] : null;\n\n    const big = !sides || (!prev && !next);\n\n    const showPrev: MouseEventHandler<HTMLElement> = ev => {\n        ev.stopPropagation();\n        setIndex(Math.max(index - 1, 0));\n    }\n    const showNext: MouseEventHandler<HTMLElement> = ev => {\n        ev.stopPropagation();\n        setIndex(Math.min(index + 1, photos.length - 1));\n    }\n\n    useEffect(() => {\n        setIndex(0); // reset index on photos change\n    }, [photos])\n\n    return (\n        <div className={classNames({\n            [styles.slider]: true,\n            [styles.roundBorders]: roundBorders,\n        }, className)}>\n            <svg viewBox={`0 0 1 ${big ? 1 : 0.8}`}></svg>\n            {sides && secondPrev && <SliderPhoto photo={secondPrev} className={styles.secondPrev} onClick={showPrev} />}\n            {sides && prev && <SliderPhoto photo={prev} className={classNames({\n                [styles.prev]: true,\n                [styles.padded]: secondPrev\n            })} onClick={showPrev} />}\n\n            {prev && <CenteredButton direction=\"left\" onClick={showPrev} />}\n\n            {current && <SliderPhoto photo={current} className={classNames({\n                [styles.current]: true,\n                [styles.left]: secondNext,\n                [styles.right]: secondPrev,\n                [styles.big]: big\n            })} onClick={onCenterClick} />}\n\n            {next && <CenteredButton direction=\"right\" onClick={showNext} />}\n\n            {sides && next && <SliderPhoto photo={next} className={classNames({\n                [styles.next]: true,\n                [styles.padded]: secondNext\n            })} onClick={showNext} />}\n            {sides && secondNext && <SliderPhoto photo={secondNext} className={styles.secondNext} onClick={showNext} />}\n            {!sides && photos.length > 1 && <div className={styles.position}>\n                {new Array(photos.length).fill(null).map((_, i) => <Point current={i === index} key={i} onClick={ev => {\n                    ev.stopPropagation();\n                    setIndex(i)\n                }} />)}\n            </div>}\n        </div>\n    )\n}\n\nconst Point: FC<{ current?: boolean, onClick?: MouseEventHandler<HTMLElement> }> = ({ current, onClick }) => {\n    return (\n        <div className={classNames({\n            [styles.point]: true,\n            [styles.current]: current\n        })} onClick={onClick} />\n    )\n}\n\nconst CenteredButton: FC<{ direction: \"right\" | \"left\", onClick?: MouseEventHandler<HTMLElement> }> = ({ direction, onClick }) => {\n    return (\n        <div className={classNames({\n            [styles.button]: true,\n            [styles[direction]]: true\n        })} onClick={onClick}>\n            <i className=\"icon icon-arrow\" />\n        </div>\n    )\n}\n\nconst SliderPhoto: FC<{ photo: IPhoto, className?: string, onClick?: MouseEventHandler<HTMLElement> }> = ({ photo, className, onClick }) => {\n    return (\n        <div className={classNames(styles.square, className)} onClick={onClick}>\n            <svg viewBox=\"0 0 1 1\"></svg>\n            <img className={styles.image} src={photo.url} alt=\"Post content\" />\n        </div>\n    )\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { IComment } from \"../types\";\nimport { fetchComments } from \"../util/api\";\n\nexport interface CommentsState {\n    loadedComments: IComment[];\n    currentPostId: number\n    status: \"idle\" | \"loading\" | \"failed\";\n}\n\nconst initialState: CommentsState = {\n    loadedComments: [],\n    currentPostId: -1,\n    status: \"idle\",\n}\n\nexport const fetchAllComments = createAsyncThunk(\n    \"comments/fetchAllPosts\",\n    async (post_id: number, thunkAPI) => {\n        thunkAPI.dispatch(setCurrentPostId(post_id));\n        return fetchComments(post_id);\n    }\n  );\n\nconst commentsSlice = createSlice({\n    name: \"comments\",\n    initialState,\n    reducers: {\n        setCurrentPostId(state, action: PayloadAction<number>) {\n            state.currentPostId = action.payload;\n        }\n    },\n    extraReducers: (builder) => {\n        builder.addCase(fetchAllComments.pending, (state) => {\n            state.status = \"loading\";\n            state.loadedComments = [];\n        }).addCase(fetchAllComments.fulfilled, (state, action) => {\n            state.status = \"idle\";\n            state.loadedComments = action.payload;\n        }).addCase(fetchAllComments.rejected, (state) => {\n            state.status = \"failed\";\n        });\n    },\n})\n\n// Reducer\nexport default commentsSlice.reducer;\n\n// Actions\nconst { setCurrentPostId } = commentsSlice.actions;\n\n//Selectors\n\nexport const selectLoadedComments = (state: RootState) => state.comments.loadedComments;\nexport const selectCommentsStatus = (state: RootState) => state.comments.status;\nexport const selectCurrentCommentsPostId = (state: RootState) => state.comments.currentPostId;","import { Action, configureStore, ThunkAction } from \"@reduxjs/toolkit\";\nimport commentsReducer from \"./slices/commentsSlice\";\nimport localizationReducer from \"./slices/localizationSlice\";\nimport openedPostReducer from \"./slices/openedPostSlice\";\nimport postsReducer from \"./slices/postsSlice\";\nimport profileReducer from \"./slices/profileSlice\";\n\nconst store = configureStore({\n    reducer: {\n        posts: postsReducer,\n        openedPost: openedPostReducer,\n        profile: profileReducer,\n        comments: commentsReducer,\n        localization: localizationReducer,\n    },\n})\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n\nexport default store;","import { selectLanguageCode } from \"../slices/localizationSlice\";\nimport store from \"../store\";\nimport { LocalizationParameters } from \"../types\";\n\nexport const getRelativeDateKey = (timestamp: number | string, now?: number): LocalizationParameters => {\n    if(typeof timestamp === \"string\") timestamp = new Date(timestamp.replace(/-/g, \"/\")).getTime()/1000; // Safari can't read standard format\n    now = now || Date.now() / 1000;\n    const diff = Math.abs(now - timestamp)\n\n    if (diff < 60) {\n        return {\n            key: \"date_now\"\n        }\n    }\n\n    if (diff < 3600) {\n        const minutes = Math.floor(diff / 60);\n\n        return {\n            key: \"date_minutes\",\n            count: minutes,\n            replaces: {\n                count: minutes.toString()\n            }\n        }\n    }\n\n    if (diff < 86400) {\n        const hours = Math.floor(diff / 3600);\n        return {\n            key: \"date_hours\",\n            count: hours,\n            replaces: {\n                count: hours.toString()\n            }\n        }\n    }\n\n    let date = new Date(timestamp*1000).toLocaleDateString(selectLanguageCode(store.getState()), {year: \"numeric\", month: \"long\", day: \"2-digit\"});\n    return {\n        key: \"date_date\",\n        replaces: {\n            date: date\n        }\n    }\n\n}\n","\nexport const insertNewlines = (text: string): (string | JSX.Element)[] => {\n    const arr = text.split(\"\\n\").map((e, i) => [e, <br key={i}/>]).flat(1);\n    arr.pop(); // remove last br\n    return arr;\n}","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport { IComment } from \"../../../types\";\nimport { getRelativeDateKey } from \"../../../util/date\";\nimport { useLocalization } from \"../../../util/hooks\";\nimport { insertNewlines } from \"../../../util/jsx\";\nimport { Avatar } from \"../../basic/avatar/Avatar\";\nimport styles from \"./Comment.module.scss\";\n\ntype CommentParams = {\n    comment: IComment\n    className?: string\n    avatarSize?: string\n}\n\nexport const Comment: FC<CommentParams> = ({avatarSize=\"2.5rem\", comment, className}) => {\n    const lp = useLocalization();\n\n    return (\n        <div className={classNames([styles.comment, className])}>\n            <Avatar url={comment.commenter.profile_photo_url} size={avatarSize}/>\n            <div className={styles.column}>\n                <div className={styles.name}>\n                    {`${comment.commenter.first_name || \"\"} ${comment.commenter.last_name || \"\"}`}\n                </div>\n                <div className={styles.message}>\n                    {insertNewlines(comment.message)}\n                </div>\n                <div className={styles.time}>\n                    {lp(getRelativeDateKey(comment.created_at))}\n                </div>\n            </div>\n        </div>\n    )\n}","function fallbackCopyTextToClipboard(text) {\n    var textArea = document.createElement(\"textarea\");\n    textArea.value = text;\n\n    // Avoid scrolling to bottom\n    textArea.style.top = \"0\";\n    textArea.style.left = \"0\";\n    textArea.style.position = \"fixed\";\n\n    document.body.appendChild(textArea);\n    textArea.focus();\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.error('Failed to copy text to clipboard!', err);\n    }\n\n    document.body.removeChild(textArea);\n}\n\nexport function copyTextToClipboard(text) {\n    if (navigator.clipboard) {\n        navigator.clipboard.writeText(text);\n    } else {\n        fallbackCopyTextToClipboard(text);\n    }\n\n}\n\nexport function copyBlobToClipboard(blob) {\n\tif(!navigator.clipboard) return false;\n\n\tconst type = blob.type;\n\tif(type.includes(\"jpg\") || type.includes(\"jpeg\")) {\n\t\treturn convertToPng(blob).then(copyBlobToClipboard);\n\t}\n\n    return navigator.clipboard.write([\n        // eslint-disable-next-line no-undef\n        new ClipboardItem({\n            [blob.type]: blob\n        })\n    ]);\n}\n\nconst createImage = (options) => {\n  options = options || {};\n  const img = document.createElement(\"img\");\n  if (options.src) {\n    img.src = options.src;\n  }\n  return img;\n};\n\nfunction convertToPng(imgBlob) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst imageUrl = window.URL.createObjectURL(imgBlob);\n\t\t  const canvas = document.createElement(\"canvas\");\n\t\t  const ctx = canvas.getContext(\"2d\");\n\t\t  const imageEl = createImage({ src: imageUrl });\n\t\t  imageEl.onload = (e) => {\n\t\t    canvas.width = e.target.width;\n\t\t    canvas.height = e.target.height;\n\t\t    ctx.drawImage(e.target, 0, 0, e.target.width, e.target.height);\n\t\t    canvas.toBlob(resolve, \"image/png\", 1);\n\t\t  }; \n\t})\n}\n\nexport async function blobToByteArray(blob) {\n    const buffer = await blob.arrayBuffer();\n    const view = new Uint8Array(buffer);\n    return Array.from(view);\n}","import { FC, MouseEventHandler } from \"react\";\nimport { useLocalization } from \"../../../util/hooks\";\nimport { Button } from \"../button/Button\";\nimport { Modal } from \"./Modal\";\nimport styles from \"./Prompt.module.scss\";\n\ntype PromptParams = {\n    opened?: boolean\n    text?: string\n    danger?: boolean\n    onClose?: MouseEventHandler<HTMLElement>\n    onConfirm?: MouseEventHandler<HTMLElement>\n    onRequestClose?: MouseEventHandler<HTMLElement>\n}\n\nexport const Prompt: FC<PromptParams> = ({ opened = false, danger = false, text, onClose, onConfirm, onRequestClose }) => {\n    const lp = useLocalization();\n\n    return (\n        <Modal isOpen={opened} className={styles.prompt} onRequestClose={onRequestClose} mobileExpand={false}>\n            <div className={styles.text}>\n                {text}\n            </div>\n            <div className={styles.buttons}>\n                <Button color=\"white\" lightBorder onClick={ev => {\n                    onClose?.(ev); \n                    onRequestClose?.(ev);\n                }}>{lp(\"general_no\")}</Button>\n                <Button color={danger ? \"red\" : \"blue\"} onClick={onConfirm}>{lp(\"general_yes\")}</Button>\n            </div>\n        </Modal>\n    )\n}","import { FC, MouseEventHandler, useEffect, useState } from \"react\";\nimport { Item, Menu, useContextMenu } from 'react-contexify';\nimport 'react-contexify/dist/ReactContexify.css';\nimport { useHistory } from \"react-router-dom\";\nimport { deleteOwnPost, dislikePost, likePost } from \"../../../slices/postsSlice\";\nimport { selectAccount } from \"../../../slices/profileSlice\";\nimport { IPost } from \"../../../types\";\nimport { copyTextToClipboard } from \"../../../util/clipboard\";\nimport { BASE_URL } from \"../../../util/contants\";\nimport { getRelativeDateKey } from \"../../../util/date\";\nimport { useAppDispatch, useAppSelector, useAuthorization, useLocalization } from \"../../../util/hooks\";\nimport { insertNewlines } from \"../../../util/jsx\";\nimport { Avatar } from \"../../basic/avatar/Avatar\";\nimport { IconButton } from \"../../basic/button/IconButton\";\nimport { Prompt } from \"../../basic/modal/Prompt\";\nimport { Slider } from \"../../slider/Slider\";\nimport styles from \"./Post.module.scss\";\n\ntype PostProps = {\n    post: IPost\n    sliderSides?: boolean\n    onClick?: MouseEventHandler<HTMLElement>\n}\n\nexport const Post: FC<PostProps> = ({ post, sliderSides, onClick }) => {\n    const lp = useLocalization();\n    const history = useHistory();\n    const dispatch = useAppDispatch();\n\n    const [deletePrompt, setDeletePrompt] = useState(false);\n    const [shared, setShared] = useState(false);\n\n    useEffect(() => {\n        let id: NodeJS.Timeout;\n        if(shared) {\n           id = setTimeout(() => setShared(false), 2000);\n        }\n        return () => clearTimeout(id);\n    }, [shared])\n\n    const { show } = useContextMenu({\n        id: post.id,\n    });\n\n    const account = useAppSelector(selectAccount);\n    const requireAuth = useAuthorization();\n\n    const copyLink = () => {\n        copyTextToClipboard(BASE_URL + \"#/\" + post.id);\n        setShared(true);\n    }\n\n    return (\n        <div className={styles.post}>\n            <div className={styles.header}>\n                <Avatar url={post.author.profile_photo_url} size={\"2.5em\"} to={`/profile/${post.author.username}`} />\n                <div className={styles.info}>\n                    <div className={styles.name}>\n                        {`${post.author.first_name || \"\"} ${post.author.last_name || \"\"}`}\n                    </div>\n                    <div className={styles.time}>\n                        {lp(getRelativeDateKey(post.created_at))}\n                    </div>\n                </div>\n                <div className={styles.more} onClick={ev => show(ev)}>\n                    <i className=\"icon icon-more\" />\n                </div>\n            </div>\n            <div className={styles.content}>\n                <div className={styles.sliderOverlay}>\n                    {!!post.photos.length && <Slider\n                                                className={styles.slider}\n                                                photos={post.photos}\n                                                onCenterClick={onClick}\n                                                sides={sliderSides}\n                                                roundBorders/>}\n                    {shared && <div className={styles.shared}><span>{lp(\"post_copied\")}</span></div>}\n                </div>\n                {post.description && <div className={styles.description} onClick={onClick}>{insertNewlines(post.description)}</div>}\n            </div>\n            <div className={styles.footer}>\n                <IconButton\n                    className={styles.iconButton}\n                    icon=\"like\" text={post.likes_count.toString()}\n                    checked={post.is_liked}\n                    onClick={() => requireAuth(() => dispatch(post.is_liked ? dislikePost(post.id) : likePost(post.id)))}\n                />\n                <IconButton className={styles.iconButton} icon=\"comments\" text=\"0\" onClick={() => history.push(`/${post.id}`)} />\n                <div className={styles.separator} />\n                <div className={styles.share} onClick={copyLink}>{lp(\"post_share\")} <i className=\"icon icon-arrow\" /></div>\n            </div>\n\n            <Menu id={post.id}>\n                <Item onClick={copyLink}>{lp(\"post_copy_link\")}</Item>\n                {account?.username === post.author.username &&\n                    <Item className={styles.danger} onClick={() => setDeletePrompt(true)}>{lp(\"post_delete\")}</Item>}\n            </Menu>\n\n            {deletePrompt && <Prompt\n                text={lp(\"post_delete_confirm\")}\n                danger\n                opened={deletePrompt}\n                onConfirm={() => dispatch(deleteOwnPost(post.id))}\n                onRequestClose={() => setDeletePrompt(false)}\n            />}\n        </div>\n    )\n}\n","import classNames from \"classnames\";\nimport { FC, MouseEventHandler, useEffect, useState } from \"react\";\nimport { closePost, leaveOwnComment, openPost, selectOpenedComments, selectOpenedPost } from \"../../../slices/openedPostSlice\";\nimport { dislikePost, likePost, selectPostsStatus } from \"../../../slices/postsSlice\";\nimport { IComment, IPost } from \"../../../types\";\nimport { IS_DESKTOP } from \"../../../util/contants\";\nimport { useAppDispatch, useAppSelector, useAuthorization, useLocalization, useWindowSize } from \"../../../util/hooks\";\nimport { Avatar } from \"../../basic/avatar/Avatar\";\nimport { IconButton } from \"../../basic/button/IconButton\";\nimport { Modal } from \"../../basic/modal/Modal\";\nimport { TextArea } from \"../../basic/textarea/TextArea\";\nimport { Header } from \"../../header/Header\";\nimport { Slider } from \"../../slider/Slider\";\nimport { Comment } from \"../comment/Comment\";\nimport { Post } from \"../post/Post\";\nimport styles from \"./ModalPost.module.scss\";\n\ntype ModalPostParams = {\n    opened?: boolean\n    postId?: number\n    onRequestClose?: MouseEventHandler<HTMLElement>\n}\n\nexport const ModalPost: FC<ModalPostParams> = ({ postId = -1, opened = false, onRequestClose }) => {\n    const lp = useLocalization();\n    const dispatch = useAppDispatch();\n    useWindowSize();\n\n    const post = useAppSelector(selectOpenedPost);\n    const postStatus = useAppSelector(selectPostsStatus);\n    const comments = useAppSelector(selectOpenedComments);\n\n    useEffect(() => {\n        if (postId >= 0) {\n            dispatch(openPost(postId));\n        } else {\n            dispatch(closePost()); // don't keep last post loaded in store\n        }\n    }, [dispatch, postId]);\n\n    let content;\n\n    if (!post) {\n        if (postStatus === \"loading\") {\n            content = lp(\"general_loading\");\n        } else {\n            content = lp(\"general_error_loading\");\n        }\n    } else {\n        // designer decided that mobile will use standard post with comments, but not desktop\n        if (!IS_DESKTOP()) {\n            content = (\n                <>\n                    <Header back onBackClick={onRequestClose} />\n                    <Post post={post} sliderSides />\n                    <Comments post={post} comments={comments} />\n                </>\n            )\n        } else {\n            content = (\n                <>\n                    {post.photos.length ?\n                        <Slider photos={post.photos} className={styles.slider} />\n                        : <div className={styles.noImages}>{lp(\"post_no_images\")}</div>}\n                    <div className={styles.data}>\n                        <div className={styles.header}>\n                            <Avatar className={styles.avatar} url={post.author.profile_photo_url} size=\"3rem\" />\n                            <div className={styles.name}>\n                                {`${post.author.first_name || \"\"} ${post.author.last_name || \"\"}`}\n                            </div>\n                            <div className={styles.separator} />\n                            <i className={`icon icon-cross ${styles.close}`} onClick={onRequestClose} />\n                        </div>\n                        <Comments post={post} comments={comments} likes padding />\n                    </div>\n                </>\n            )\n        }\n    }\n\n    return (\n        <Modal isOpen={opened} className={styles.modalPost} onRequestClose={onRequestClose} tabletExpand>\n            {content}\n        </Modal>\n    )\n}\n\ntype CommentsProps = {\n    comments: IComment[]\n    post: IPost\n    likes?: boolean\n    padding?: boolean\n}\n\nconst Comments: FC<CommentsProps> = ({ comments, post, likes = false, padding = false }) => {\n    const lp = useLocalization();\n    const dispatch = useAppDispatch();\n    const requireAuth = useAuthorization();\n\n    const [comment, setComment] = useState(\"\");\n\n    return (\n        <>\n            <div className={classNames({\n                [styles.comments]: true,\n                [styles.padding]: padding\n            })}>\n                {comments.length ? comments.map(comment => <Comment avatarSize=\"3rem\" className={styles.comment} comment={comment} key={comment.id} />) : lp(\"post_no_comments\")}\n            </div>\n            {likes && <div className={styles.buttons}>\n                <IconButton\n                    icon=\"like\"\n                    text={post.likes_count.toString()}\n                    className={styles.like}\n                    checked={post.is_liked}\n                    onClick={() => requireAuth(() => post.is_liked ? dispatch(dislikePost(post.id)) : dispatch(likePost(post.id)))}\n                />\n            </div>}\n            <div className={styles.newComment}>\n                <TextArea\n                    minRows={1}\n                    className={styles.input}\n                    placeholder={lp(\"post_add_comment\")}\n                    value={comment}\n                    onChange={ev => setComment(ev.currentTarget.value)}\n                />\n                <button className={styles.post} onClick={() => requireAuth(() => {\n                    dispatch(leaveOwnComment({ post_id: post.id, message: comment }));\n                    setComment(\"\");\n                })}>{lp(\"post_post_comment\")}</button>\n            </div>\n        </>\n    )\n}","import classNames from \"classnames\";\nimport { FC, MouseEventHandler } from \"react\";\nimport styles from \"./Toast.module.scss\";\n\ntype ToastParams = {\n    text: string\n    show?: boolean\n    className?: string\n    onClick?: MouseEventHandler<HTMLElement>\n    onClose?: MouseEventHandler<HTMLElement>\n}\n\nexport const Toast: FC<ToastParams> = ({ text, show = false, className, onClick, onClose }) => {\n    return (\n        <div className={classNames({\n            [styles.toast]: true,\n            [styles.show]: show\n        }, className)} onClick={onClick}>\n            <div className={styles.text}>\n                {text}\n            </div>\n            <i className={`icon icon-cross ${styles.close}`} onClick={ev => {\n                ev.stopPropagation();\n                onClose?.(ev);\n            }} />\n        </div>\n    )\n}","import { FC, useEffect, useState } from \"react\";\nimport { checkForNewPosts, fetchAllPosts, selectLoadedPosts, selectNewPostsAvailable, selectPostsStatus } from \"../../../slices/postsSlice\";\nimport { useAppDispatch, useAppSelector, useLocalization } from \"../../../util/hooks\";\nimport { ModalPost } from \"../modal/ModalPost\";\nimport { Post } from \"../post/Post\";\nimport { Toast } from \"../toast/Toast\";\nimport styles from \"./Feed.module.scss\";\n\ntype FeedParameters = {\n    username?: string\n}\n\nexport const Feed: FC<FeedParameters> = ({ username }) => {\n    const dispatch = useAppDispatch();\n    const lp = useLocalization();\n\n    useEffect(() => {\n        dispatch(fetchAllPosts(username));\n    }, [username, dispatch]);\n\n    const [modalPostId, setModalPostId] = useState(-1);\n    const [showToast, setShowToast] = useState(false);\n\n    const posts = useAppSelector(selectLoadedPosts);\n    const status = useAppSelector(selectPostsStatus);\n    const newPostsAvailable = useAppSelector(selectNewPostsAvailable);\n\n    useEffect(() => {\n        setShowToast(newPostsAvailable);\n    }, [newPostsAvailable]);\n\n    useEffect(() => {\n        const id = setInterval(() => {\n            dispatch(checkForNewPosts());\n        }, 10000);\n\n        return () => clearInterval(id);\n    }, [dispatch]);\n\n    let content;\n\n    if (status === \"idle\") {\n        if(posts.length) {\n            content = posts.map(post => <Post key={post.id} post={post} onClick={() => {\n                setModalPostId(post.id)\n            }}/>);\n        } else {\n            content = <div className={styles.text}>{lp(\"feed_no_posts\")}</div>;\n        }\n    } else if (status === \"loading\") {\n        content = <div className={styles.text}>{lp(\"general_loading\")}</div>;\n    } else {\n        content = <div className={styles.text}>{lp(\"general_error_loading\")}</div>;\n    }\n\n    return (\n        <div className={styles.feed}>\n            <Toast \n                className={styles.toast}\n                show={showToast} \n                text={lp(\"feed_new_posts\")}\n                onClick={() => dispatch(fetchAllPosts(username))} \n                onClose={() => setShowToast(false)}\n            />\n            {content}\n            <ModalPost opened={modalPostId >= 0} postId={modalPostId} onRequestClose={() => setModalPostId(-1)}/>\n        </div>\n    )\n}","import AwsS3 from \"@uppy/aws-s3\"\nimport Uppy from \"@uppy/core\"\nimport { IImage } from \"../types\"\nimport { API_BASE } from \"./api\"\n\nexport const getUppy = () => {\n    const uppy = Uppy<Uppy.StrictTypes>({\n        restrictions: {\n            maxNumberOfFiles: 10,\n            allowedFileTypes: [\"image/png\", \"image/jpg\", \"image/jpeg\"],\n            maxFileSize: 5 * 1024 * 1024 // 5MB\n        },\n    })\n\n    uppy.use(AwsS3, {\n        companionUrl: API_BASE,\n    });\n\n    return uppy;\n}\n\nexport const addFile = (uppy: Uppy.Uppy, file: File) => {\n    return uppy.addFile({\n        name: file.name,\n        type: file.type,\n        data: file,\n        source: 'Local'\n    })\n}\n\nexport const uploadFiles = async (files: File[]) => {\n    const uppy = getUppy();\n    files.forEach(file => addFile(uppy, file));\n\n    const result = await uppy.upload();\n    if(result.failed.length) {\n        return result.failed;\n    }\n    if(result.successful.length) {\n        return transformFileData(result.successful);\n    }\n    return [];\n}\n\nexport const transformFileData = (files: Uppy.UploadedUppyFile<any, any>[]): IImage[] => {\n    return files.map(file => {\n        const key: string = (file.meta as any).key;\n        const [storage, id] = key.split(\"/\");\n        const params: IImage = {\n            id: id,\n            storage: storage,\n            metadata: {\n                filename: file.meta.name,\n                size: file.data.size,\n                mime_type: file.data.type\n            }\n        }\n        return params;\n    });\n}","import Uppy from \"@uppy/core\";\nimport classNames from \"classnames\";\nimport React, { FC, SyntheticEvent, useEffect, useRef, useState } from \"react\";\nimport { IPhoto } from \"../../../types\";\nimport { addFile } from \"../../../util/uppy\";\nimport { Slider } from \"../../slider/Slider\";\nimport styles from \"./ImageInput.module.scss\";\n\ninterface ImageInputProps {\n    uppy: Uppy.Uppy\n    accept?: string[]\n    multiple?: boolean\n    text?: string\n    className?: string\n    defaultPreviewUrl?: string\n    onFailedFiles?: (files: File[]) => void\n    onFilesSelected?: (files: File[]) => void\n}\n\nexport const ImageInput: FC<ImageInputProps> = ({ uppy, accept = [\"image/*\"], multiple = false, text, defaultPreviewUrl, className, onFailedFiles, onFilesSelected }) => {\n    const inputRef = useRef<HTMLInputElement>(null);\n    const [files, setFiles] = useState<File[]>([]);\n\n    useEffect(() => {\n        // clear and re-add files on change\n        uppy.getFiles().forEach(file => uppy.removeFile(file.id));\n\n        let failedFiles: File[] = [];\n\n        files.forEach(file => {\n            try {\n                addFile(uppy, file)\n            } catch (ex) {\n                failedFiles.push(file);\n            }\n        });\n        // remove failed files from state\n        if (failedFiles.length) {\n            setFiles(files.filter(file => !failedFiles.includes(file)));\n            onFailedFiles?.(failedFiles);\n        }\n    }, [files, uppy, onFailedFiles]);\n\n    const preventEvent = (ev: SyntheticEvent) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n    }\n\n    return (\n        <div className={classNames({\n            [styles.file]: true\n        }, className)}\n            onClick={() => inputRef.current?.click()}\n            onDragOver={preventEvent}\n            onDragEnter={preventEvent}\n            onDragLeave={preventEvent}\n            onDrop={ev => {\n                ev.preventDefault();\n                onFilesSelected?.(Array.from(ev.dataTransfer.files));\n                setFiles(Array.from(ev.dataTransfer.files))\n            }}\n        >\n            <div className={styles.preview}>\n                {files.length ? <Slider photos={filesToPhotos(files)} className={styles.slider} /> :\n                    defaultPreviewUrl ? <img src={defaultPreviewUrl} alt=\"Preview\" /> : text}\n            </div>\n            <input type=\"file\" accept={accept.join(\",\")} multiple={multiple} ref={inputRef} hidden onChange={ev => {\n                if (ev.target.files?.length) {\n                    onFilesSelected?.(Array.from(ev.target.files));\n                    setFiles(Array.from(ev.target.files))\n                }\n            }\n            } />\n        </div>\n    )\n}\n\nconst filesToPhotos = (files: File[]): IPhoto[] => {\n    return files.map((file, i) => ({ id: i, url: URL.createObjectURL(file) }));\n}","import { FC, useEffect, useState } from \"react\";\nimport { createOwnPost } from '../../../slices/postsSlice';\nimport { useAppDispatch, useLocalization } from \"../../../util/hooks\";\nimport { getUppy, transformFileData } from '../../../util/uppy';\nimport { Button } from \"../../basic/button/Button\";\nimport { ImageInput } from \"../../basic/file/ImageInput\";\nimport { Modal } from '../../basic/modal/Modal';\nimport { TextArea } from \"../../basic/textarea/TextArea\";\nimport styles from \"./NewPost.module.scss\";\n\ntype NewPostParameters = {\n    opened?: boolean\n    onRequestClose?(event: React.MouseEvent<Element, MouseEvent> | React.KeyboardEvent<Element>): void\n}\n\nconst uppy = getUppy();\n\nexport const NewPost: FC<NewPostParameters> = ({ opened = false, onRequestClose }) => {\n    const lp = useLocalization();\n    const dispatch = useAppDispatch();\n\n    const [description, setDescription] = useState(\"\");\n    const [error, setError] = useState(\"\");\n\n    useEffect(() => {\n        if (!opened) {\n            setDescription(\"\");\n            setError(\"\");\n            uppy.reset();\n        }\n    }, [opened])\n\n    return (\n        <Modal className={styles.newPost} isOpen={opened} onRequestClose={onRequestClose}>\n            <ImageInput\n                text={lp(\"post_new_file\")}\n                className={styles.input}\n                uppy={uppy}\n                multiple\n                accept={[\"image/png\", \"image/jpg\", \"image/jpeg\"]}\n                onFailedFiles={files => setError(lp(\"post_new_failed_to_select\", { files: files.map(el => el.name).join(\",\") }))}\n                onFilesSelected={() => setError(\"\")}\n            />\n            {error && <div className={styles.error}>{error}</div>}\n            <TextArea\n                className={styles.description}\n                minRows={3}\n                placeholder={lp(\"post_new_description_placeholder\")}\n                label={lp(\"post_new_description\")}\n                onChange={ev => setDescription(ev.currentTarget.value)}\n                value={description}\n            />\n            <div className={styles.buttons}>\n                <Button lightBorder onClick={onRequestClose}>{lp(\"general_cancel\")}</Button>\n                <Button color=\"blue\" onClick={async ev => {\n                    let result;\n                    try {\n                        result = await uppy.upload()\n                    } catch (ex) {\n                        setError(ex);\n                        return;\n                    }\n                    // move this code into util\n                    if (result.failed.length) {\n                        setError(lp(\"post_new_failed_to_upload\", { files: result.failed.map(el => el.name).join(\",\") }))\n                        return;\n                    }\n\n                    if (result.successful.length) {\n                        const images = transformFileData(result.successful);\n                        dispatch(createOwnPost({\n                            description,\n                            photos_attributes: images.map(image => ({ image }))\n                        }))\n                        onRequestClose?.(ev);\n                    } else if (result.successful.length === 0 && result.failed.length === 0) {\n                        // text post, without images\n                        if (description) {\n                            dispatch(createOwnPost({\n                                description,\n                                photos_attributes: []\n                            }))\n                            onRequestClose?.(ev);\n                        }\n                    }\n                }}>{lp(\"post_new_post\")}</Button>\n            </div>\n        </Modal>\n    )\n}","import classNames from \"classnames\";\nimport { FC } from \"react\";\nimport styles from \"./Input.module.scss\";\n\nexport interface InputParameters extends React.InputHTMLAttributes<HTMLInputElement> {\n    label?: string\n    placeholder?: string\n    icon?: string\n    iconColor?: string\n    className?: string\n    [key: string]: any\n}\n\nexport const Input: FC<InputParameters> = ({label, placeholder, icon, iconColor, className, ...otherParams}) => {\n    return (\n        <label className={classNames({\n            [styles.input]: true\n            }, className)}>\n            {label}\n            <input placeholder={placeholder} {...otherParams}/>\n        </label>\n    )\n}","import classNames from \"classnames\";\nimport { FC, useState } from \"react\";\nimport { logout, selectAccount, updateAccount } from \"../../../slices/profileSlice\";\nimport { IProfileUpdateParameters } from \"../../../util/api\";\nimport { useAppDispatch, useAppSelector, useLocalization } from \"../../../util/hooks\";\nimport { getUppy, transformFileData } from \"../../../util/uppy\";\nimport { Button } from \"../../basic/button/Button\";\nimport { ImageInput } from \"../../basic/file/ImageInput\";\nimport { Input } from \"../../basic/input/Input\";\nimport { Modal } from \"../../basic/modal/Modal\";\nimport { TextArea } from \"../../basic/textarea/TextArea\";\nimport styles from \"./ProfileEdit.module.scss\";\n\ntype ProfileEditParameters = {\n    opened?: boolean\n    onRequestClose?(event: React.MouseEvent<Element, MouseEvent> | React.KeyboardEvent<Element>): void\n}\n\nconst uppy = getUppy();\n\nexport const ProfileEdit: FC<ProfileEditParameters> = ({ opened = false, onRequestClose }) => {\n    const lp = useLocalization();\n    const dispatch = useAppDispatch();\n\n    const account = useAppSelector(selectAccount);\n\n    const [firstName, setFirstName] = useState(account?.first_name);\n    const [secondName, setSecondName] = useState(account?.last_name);\n    const [jobTitle, setJobTitle] = useState(account?.job_title);\n    const [description, setDescription] = useState(account?.description);\n\n    if (!account) {\n        return (\n            <Modal className={styles.profileEdit} isOpen={opened} onRequestClose={onRequestClose}>\n                NO ACCOUNT!!!\n            </Modal>\n        )\n    }\n\n    return (\n        <Modal className={styles.profileEdit} isOpen={opened} onRequestClose={onRequestClose}>\n            <div className={styles.header}>\n                <div className={styles.title}>\n                    {lp(\"profile_edit_title\")}\n                </div>\n                <div className={styles.logout} onClick={ev => {\n                    dispatch(logout());\n                    onRequestClose?.(ev);\n                }}>\n                    {lp(\"general_logout\")}\n                </div>\n            </div>\n            <div className={styles.topBlock}>\n                <div className={styles.avatarWrapper}>\n                    <ImageInput className={styles.avatar} uppy={uppy} defaultPreviewUrl={account.profile_photo_url}/>\n                    <div className={styles.avatarText}>{lp(\"profile_edit_photo\")}</div>\n                </div>\n                <div className={styles.name}>\n                    <Input\n                        className={styles.input}\n                        label={lp(\"profile_edit_first_name\")}\n                        placeholder={lp(\"profile_edit_first_name_placeholder\")}\n                        value={firstName}\n                        onChange={ev => setFirstName(ev.currentTarget.value)}\n                    />\n                    <Input\n                        className={styles.input}\n                        label={lp(\"profile_edit_second_name\")}\n                        placeholder={lp(\"profile_edit_second_name_placeholder\")}\n                        value={secondName}\n                        onChange={ev => setSecondName(ev.currentTarget.value)}\n                    />\n                </div>\n            </div>\n            <Input\n                className={styles.input}\n                label={lp(\"profile_edit_job_title\")}\n                placeholder={lp(\"profile_edit_job_title_placeholder\")}\n                value={jobTitle}\n                onChange={ev => setJobTitle(ev.currentTarget.value)}\n            />\n            <TextArea\n                className={classNames(styles.input, styles.description)}\n                label={lp(\"profile_edit_description\")}\n                placeholder={lp(\"profile_edit_description_placeholder\")}\n                value={description}\n                onChange={ev => setDescription(ev.currentTarget.value)}\n            />\n\n            <div className={styles.buttons}>\n                <Button lightBorder onClick={onRequestClose}>{lp(\"general_cancel\")}</Button>\n                <Button color=\"blue\" onClick={async ev => {\n                    const params: IProfileUpdateParameters = {...account};\n                    params.first_name = firstName;\n                    params.last_name = secondName;\n                    params.job_title = jobTitle;\n                    params.description = description;\n                    \n                    if(uppy.getFiles().length) {\n                        const result = await uppy.upload();\n                        if(result.successful.length) {\n                            params.profile_photo = transformFileData(result.successful)[0]\n                        }\n\n                        // TODO handle errors\n                    }\n\n                    dispatch(updateAccount(params));\n                    onRequestClose?.(ev);\n                }}>{lp(\"general_save\")}</Button>\n            </div>\n        </Modal>\n    )\n}","import classNames from \"classnames\";\nimport { FC, useState } from \"react\";\nimport { IProfile } from \"../../../types\";\nimport { useAuthorization, useLocalization } from \"../../../util/hooks\";\nimport { insertNewlines } from \"../../../util/jsx\";\nimport { Avatar } from \"../../basic/avatar/Avatar\";\nimport { Button } from \"../../basic/button/Button\";\nimport { NewPost } from \"../../posts/new/NewPost\";\nimport { ProfileEdit } from \"../edit/ProfileEdit\";\nimport styles from \"./ProfileInfo.module.scss\";\n\ntype ProfileInfoProps = {\n    profile: IProfile\n    own?: boolean\n    horizontal?: boolean\n}\n\nexport const ProfileInfo: FC<ProfileInfoProps> = ({ profile, own = false, horizontal = false }) => {\n    const lp = useLocalization();\n    const requireAuth = useAuthorization();\n\n    const [isNewPostOpened, setNewPostOpened] = useState(false);\n    const [isProfileEditOpened, setProfileEditOpened] = useState(false);\n\n    const nameString = `${profile.first_name || \"\"} ${profile.last_name || \"\"}`;\n    if (horizontal) {\n        return (\n            <div className={classNames([styles.profileInfo, styles.horizontal])}>\n                <div className={styles.avatar}>\n                    <Avatar url={profile.profile_photo_url} border size=\"7.25em\" />\n                </div>\n                <div className={styles.info}>\n                    <div className={styles.name}>\n                        {nameString}\n                    </div>\n                    <div className={styles.job}>\n                        {profile.job_title || \"\"}\n                    </div>\n                    <div className={styles.description}>\n                        {insertNewlines(profile.description || \"\")}\n                    </div>\n                </div>\n                <div className={styles.separator} />\n                <div className={styles.right}>\n                    <div className={styles.social}>\n                        <div className={styles.followers}>\n                            <div className={styles.number}>{profile.followers}</div>\n                            <div className={styles.smallText}>{lp(\"profile_followers\", {}, profile.followers)}</div>\n                        </div>\n\n                        <div className={styles.following}>\n                            <div className={styles.number}>{profile.following}</div>\n                            <div className={styles.smallText}>{lp(\"profile_following\")}</div>\n                        </div>\n                    </div>\n                    {own && <div className={styles.actionButtons}>\n                        <Button smallPadding lightBorder onClick={() => requireAuth(() => setProfileEditOpened(true))}>{lp(\"profile_edit\")}</Button>\n                        <Button smallPadding color=\"blue\" onClick={() => requireAuth(() => setNewPostOpened(true))}>{lp(\"post_new\")}</Button>\n                    </div>}\n                </div>\n                <NewPost opened={isNewPostOpened} onRequestClose={() => setNewPostOpened(false)} />\n                <ProfileEdit opened={isProfileEditOpened} onRequestClose={() => setProfileEditOpened(false)} />\n            </div>\n        )\n    }\n\n    return (\n        <div className={styles.profileInfo}>\n            <div className={styles.top}>\n                <div className={styles.followers}>\n                    <div className={styles.number}>{profile.followers}</div>\n                    <div className={styles.smallText}>{lp(\"profile_followers\", {}, profile.followers)}</div>\n                </div>\n                <div className={styles.avatar}>\n                    <Avatar url={profile.profile_photo_url} border size=\"5em\" />\n                    {own && <i className={`icon icon-add ${styles.add}`} />}\n                </div>\n                <div className={styles.following}>\n                    <div className={styles.number}>{profile.following}</div>\n                    <div className={styles.smallText}>{lp(\"profile_following\")}</div>\n                </div>\n            </div>\n            <div className={styles.bottom}>\n                <div className={styles.info}>\n                    {nameString} {profile.job_title ? `- ${profile.job_title || \"\"}` : \"\"}\n                </div>\n                <div className={styles.description}>\n                    {insertNewlines(profile.description || \"\")}\n                </div>\n                {own && <div className={styles.actionButtons}>\n                    <Button smallPadding onClick={() => requireAuth(() => setProfileEditOpened(true))}>{lp(\"profile_edit\")}</Button>\n                    <Button smallPadding color=\"blue\" onClick={() => requireAuth(() => setNewPostOpened(true))}>{lp(\"post_new\")}</Button>\n                </div>}\n            </div>\n            <NewPost opened={isNewPostOpened} onRequestClose={() => setNewPostOpened(false)} />\n            <ProfileEdit opened={isProfileEditOpened} onRequestClose={() => setProfileEditOpened(false)} />\n        </div>\n    )\n}","import { FC, useEffect } from \"react\";\nimport { fetchAllProfiles, selectProfiles } from \"../../slices/profileSlice\";\nimport { useAppDispatch, useAppSelector } from \"../../util/hooks\";\nimport { Avatar } from \"../basic/avatar/Avatar\";\nimport styles from \"./Stories.module.scss\";\n\nexport const Stories: FC = () => {\n\n    const dispatch = useAppDispatch();\n\n    useEffect(() => {\n        dispatch(fetchAllProfiles());\n    }, [dispatch]);\n\n    const profiles = useAppSelector(selectProfiles);\n\n    return (\n        <div className={styles.stories}>\n            <div className={styles.scroll}>\n                {profiles.filter(profile => profile.profile_photo_url).map(profile => <Avatar\n                    key={profile.username}\n                    url={profile.profile_photo_url}\n                    size={\"4em\"}\n                    to={`/profile/${profile.username}`}\n                    border />)}\n            </div>\n        </div>\n    )\n}","import { FC, useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Button } from \"../../components/basic/button/Button\";\nimport { Footer } from \"../../components/footer/Footer\";\nimport { Header } from \"../../components/header/Header\";\nimport { Feed } from \"../../components/posts/feed/Feed\";\nimport { ModalPost } from \"../../components/posts/modal/ModalPost\";\nimport { ProfileInfo } from \"../../components/profile/info/ProfileInfo\";\nimport { Stories } from \"../../components/stories/Stories\";\nimport { selectAccount, selectIsLoggedIn } from \"../../slices/profileSlice\";\nimport { IProfile } from \"../../types\";\nimport { useAppSelector, useLocalization } from \"../../util/hooks\";\nimport styles from \"./Home.module.scss\";\n\nconst Home: FC = () => {\n    const lp = useLocalization();\n    const history = useHistory();\n    const {id} = useParams<{id: string}>();\n\n    const [modalPostOpened, setModalPostOpened] = useState(false);\n\n    const isLoggedIn = useAppSelector(selectIsLoggedIn);\n    const account = useAppSelector(selectAccount) as IProfile;\n\n    useEffect(() => {\n        if(Number.parseInt(id)) {\n            setModalPostOpened(true);\n        } else {\n            setModalPostOpened(false);\n        }\n    }, [id]);\n\n    return (\n        <div className={styles.home}>\n            <Header profile login/>\n            <div className={styles.content}>\n                <div className={styles.left}>\n                    <Stories/>\n                    <Feed/>\n                </div>\n                <div className={styles.right}>\n                    <div className={styles.sticky}>\n                        { isLoggedIn ? <ProfileInfo profile={account} own/> :<Button color=\"black\" to=\"/login\">{lp(\"general_login\")}</Button>}\n                        <Footer/>\n                    </div>\n                </div>\n            </div>\n            <ModalPost opened={modalPostOpened} postId={Number.parseInt(id) || -1} onRequestClose={() => history.push(\"/\")}/>\n        </div>\n    )\n}\n\nexport default Home;","import { Field, FieldProps, Form, Formik } from \"formik\";\nimport { FC, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport { Button } from \"../../components/basic/button/Button\";\nimport { Input, InputParameters } from \"../../components/basic/input/Input\";\nimport { Header } from \"../../components/header/Header\";\nimport { fetchCurrentAccount, selectIsLoggedIn } from \"../../slices/profileSlice\";\nimport { createAccount, fetchProfile, login } from \"../../util/api\";\nimport { IS_DESKTOP } from \"../../util/contants\";\nimport { useAppDispatch, useAppSelector, useLocalization } from \"../../util/hooks\";\nimport styles from \"./Login.module.scss\";\n\ntype FormValues = {\n    email: string\n    username: string\n    password: string\n}\n\nconst Login: FC = () => {\n    const lp = useLocalization();\n    const dispatch = useAppDispatch();\n\n    const isLoggedIn = useAppSelector(selectIsLoggedIn);\n\n    const [signUp, setSignUp] = useState(false);\n\n    const schema = Yup.object().shape({\n        email: Yup.string()\n                    .email(lp(\"login_validation_email_invalid\"))\n                    .required(lp(\"login_validation_required\")),\n        username: signUp ? Yup.string()\n                    .min(3, lp(\"login_validation_min_length\", {count: \"3\"}, 3))\n                    .max(20, lp(\"login_validation_max_length\", {count: \"20\"}, 20))\n                    .matches(/^[a-zA-Z0-9._-]*$/, \"Use alphabet, numbers and _ -\")\n                    .test(\"isTaken\", lp(\"login_validation_username_taken\"), value => { // test if username is taken\n                        if(!value) return true;\n                        return new Promise((resolve, reject) => {\n                            fetchProfile(value).then((json) => {\n                                resolve(false)\n                            }).catch(() => {\n                                resolve(true)\n                            })\n                        })\n                    })\n                    .required(lp(\"login_validation_required\")): Yup.string(),\n        password: Yup.string()\n                    .min(6, lp(\"login_validation_min_length\", {count: \"6\"}, 6))\n                    .required(lp(\"login_validation_required\"))\n    });\n\n    if(isLoggedIn) {\n        return <Redirect to=\"/\" />\n    }\n\n    return (\n        <div className={styles.login}>\n            <Header />\n            <div className={styles.content}>\n                <div className={styles.presentation}>\n                    <div className={styles.scrollable}>\n                        <img className={styles.profile} src=\"images/presentation.jpg\" alt=\"Presentation\"/>\n                    </div>\n                    <div className={styles.float1} style={{backgroundImage: \"url(images/float1.png)\"}}/>\n                    <div className={styles.float2} style={{backgroundImage: \"url(images/float2.png)\"}}/>\n                    <div className={styles.float3} style={{backgroundImage: \"url(images/float3.png)\"}}/>\n                </div>\n                <div className={styles.authPane}>\n                    <div className={styles.title}>{lp(signUp ? \"login_sign_up\" : \"login_login\")}</div>\n\n                    <Formik\n                        initialValues={{\n                            email: \"\",\n                            username: \"\",\n                            password: \"\"\n                        }}\n                        onSubmit={async (values: FormValues) => {\n                            if(signUp) {\n                                createAccount({login: values.email, password: values.password, username: values.username})\n                                    .then(() => dispatch(fetchCurrentAccount()))\n                            } else {\n                                login({login: values.email, password: values.password})\n                                    .then(() => dispatch(fetchCurrentAccount()))\n                            }\n                        }}\n                        validationSchema={schema}\n                    >\n                        <Form>\n                            <Field\n                                name=\"email\"\n                                type=\"email\"\n                                component={FormikWrapperInput}\n                                label={lp(\"login_field_email_label\")}\n                                placeholder={lp(\"login_field_email_placeholder\")}\n                            />\n                            {signUp && <Field\n                                name=\"username\"\n                                component={FormikWrapperInput}\n                                label={lp(\"login_field_username_label\")}\n                                placeholder={lp(\"login_field_username_placeholder\")}\n                            />}\n                            <Field\n                                name=\"password\"\n                                component={FormikWrapperInput}\n                                type=\"password\"\n                                label={lp(\"login_field_password_label\")}\n                                placeholder={lp(\"login_field_password_placeholder\")}\n                            />\n                            <div className={styles.mobileSeparator}/>\n                            {/* Designer is shuffling buttons */}\n                            {IS_DESKTOP() && <SubmitButton signUp={signUp}/>}\n                            <div className={styles.switch}>\n                                {lp(signUp ? \"login_have_account\" : \"login_no_account\")}\n                                <span className={styles.inlineSwitch} onClick={() => setSignUp(!signUp)}>\n                                    {lp(signUp ? \"login_login\" : \"login_sign_up\")}\n                                </span>\n                            </div>\n                            {!IS_DESKTOP() && <SubmitButton signUp={signUp}/>}\n                        </Form>\n                    </Formik>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nconst SubmitButton: FC<{signUp: boolean}> = ({signUp = false}) => {\n    const lp = useLocalization();\n    return (\n        <Button className={styles.button} color=\"blue\" type=\"submit\">\n            {lp(signUp ? \"login_sign_up_button\" : \"login_login_button\")}\n        </Button>\n    )\n}\n\nconst FormikWrapperInput: FC<InputParameters & FieldProps> = ({ field, form: { touched, errors, setFieldValue, values }, ...otherProps }) => {\n    return (\n        <div className={styles.input}>\n            <Input onChange={e => setFieldValue(field.name, e.currentTarget.value)} name={field.name} value={values[field.name]} {...otherProps} />\n            {touched[field.name] && errors[field.name] && <div className={styles.error}>{errors[field.name]}</div>}\n        </div>\n    )\n}\n\nexport default Login;","import { FC, MouseEventHandler, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { fetchAllPosts, selectLoadedPosts, selectPostsStatus } from \"../../../slices/postsSlice\";\nimport { useAppDispatch, useLocalization } from \"../../../util/hooks\";\nimport { ModalPost } from \"../modal/ModalPost\";\nimport styles from \"./PhotoFeed.module.scss\";\n\ntype PhotoFeedParameters = {\n    username?: string\n}\n\nexport const PhotoFeed: FC<PhotoFeedParameters> = ({username}) => {\n    const dispatch = useAppDispatch();\n    const lp = useLocalization();\n\n    useEffect(() => {\n        dispatch(fetchAllPosts(username));\n    }, [username, dispatch]);\n    \n    const [modalPostId, setModalPostId] = useState(-1);\n\n    const posts = useSelector(selectLoadedPosts);\n    const status = useSelector(selectPostsStatus);\n\n    let content;\n    if (status === \"idle\") {\n        if(posts.length) {\n            content = posts.map(post => post.photos.map(photo => <ImageSquare key={photo.id} url={photo.url} onClick={() => setModalPostId(post.id)}/>)).flat(1);\n        } else {\n            content = <div className={styles.text}>{lp(\"feed_no_posts\")}</div>;\n        }\n    } else if (status === \"loading\") {\n        content = lp(\"general_loading\");\n    } else {\n        content = lp(\"general_error_loading\");\n    }\n\n    return (\n        <div className={styles.photoFeed}>\n            {content}\n            <ModalPost opened={modalPostId >= 0} postId={modalPostId} onRequestClose={() => setModalPostId(-1)}/>\n        </div>\n    )\n}\n\nconst ImageSquare: FC<{url: string, onClick?: MouseEventHandler<HTMLElement>}> = ({url, onClick}) => {\n    return <div className={styles.square} onClick={onClick} style={{backgroundImage: `url(${url})`}}/>\n}","import { FC, useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { useParams } from \"react-router-dom\";\nimport { Header } from \"../../components/header/Header\";\nimport { PhotoFeed } from \"../../components/posts/feed/PhotoFeed\";\nimport { ProfileInfo } from \"../../components/profile/info/ProfileInfo\";\nimport { selectAccount } from \"../../slices/profileSlice\";\nimport { IProfile } from \"../../types\";\nimport { fetchProfile } from \"../../util/api\";\nimport { IS_DESKTOP } from \"../../util/contants\";\nimport { useAppSelector, useWindowSize } from \"../../util/hooks\";\nimport styles from \"./Profile.module.scss\";\n\nconst OwnProfile: FC = () => {\n    let { username } = useParams<{username: string}>();\n    const account = useAppSelector(selectAccount) as IProfile;\n    useWindowSize(); //update on resize\n\n    const [profile, setProfile] = useState<IProfile | null>(null);\n    const [error, setError] = useState(\"\");\n\n    useEffect(() => {\n        if (username) {\n            if(!profile || profile.username !== username) fetchProfile(username).then(json => setProfile(json)).catch(ex => setError(\"Failed to get profile\"));\n        } else {\n            setProfile(account);\n        }\n    }, [username, account, profile]);\n\n    if (!username && !localStorage.getItem(\"auth\")) {\n        return <Redirect to=\"/login\" />\n    }\n\n    const own = !!profile && account?.username === profile.username;\n\n    return (\n        <div className={styles.ownProfile}>\n            <Header home profile={!own}/>\n            <div className={styles.content}>\n                {error ? error : !profile ? \"Failed to load profile\" :\n                    <>\n                        <ProfileInfo profile={profile} own={own} horizontal={IS_DESKTOP()} />\n                        <PhotoFeed username={profile.username} />\n                    </>\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default OwnProfile;","import { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\nimport Home from \"./routes/home/Home\";\nimport Login from \"./routes/login/Login\";\nimport Profile from \"./routes/profile/Profile\";\nimport { selectLanguageCode, setLanguage } from \"./slices/localizationSlice\";\nimport { fetchCurrentAccount } from \"./slices/profileSlice\";\nimport { useAppDispatch, useAppSelector, useMountEffect } from \"./util/hooks\";\n\n\nfunction App() {\n    const dispatch = useAppDispatch();\n    const code = useAppSelector(selectLanguageCode);\n\n    // on first render\n    useMountEffect(() => {\n        dispatch(setLanguage(code));\n\n        if(localStorage.getItem(\"auth\")) dispatch(fetchCurrentAccount());\n    });\n\n    return (\n        <HashRouter>\n            <Switch>\n                <Route exact path=\"/login\">\n                    <Login />\n                </Route>\n                <Route exact path=\"/profile/:username\">\n                    <Profile />\n                </Route>\n                <Route exact path=\"/profile\">\n                    <Profile />\n                </Route>\n                <Route exact path=\"/:id\">\n                    <Home />\n                </Route>\n                <Route exact path=\"/\">\n                    <Home />\n                </Route>\n                <Route>\n                    <Redirect to=\"/\" />\n                </Route>\n            </Switch>\n        </HashRouter>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport \"./css/global.scss\";\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport { IS_SAFARI } from './util/contants';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('app')\n);\n\nModal.setAppElement('#app');\n\n// vh on mobile is kinda funky\nsetVH();\nwindow.addEventListener('resize', () => {\n    setVH();\n});\n\nfunction setVH() {\n    const vh = IS_SAFARI ? window.visualViewport.height :  window.innerHeight;\n    document.documentElement.style.setProperty('--vh100', `${vh-1}px`);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__Iv7O1\",\"square\":\"Button_square__24Qg9\",\"smallPadding\":\"Button_smallPadding__1s_AW\",\"white\":\"Button_white__E8Wbq\",\"blue\":\"Button_blue__1Yy1O\",\"black\":\"Button_black__obrtp\",\"red\":\"Button_red__1uy4_\",\"lightBorder\":\"Button_lightBorder__pQOr6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"square\":\"Avatar_square__BGVCN\",\"clickable\":\"Avatar_clickable__9RUE4\",\"border\":\"Avatar_border__1fx0F\",\"visible\":\"Avatar_visible__2JtjS\",\"avatar\":\"Avatar_avatar__JOSFH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment\":\"Comment_comment__1oC7d\",\"column\":\"Comment_column__3_p8X\",\"name\":\"Comment_name__1yMvS\",\"message\":\"Comment_message__ZB4Zo\",\"time\":\"Comment_time__U8Dri\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"Feed_feed__3hto0\",\"text\":\"Feed_text__3JgoK\",\"toast\":\"Feed_toast__3Tmw7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newPost\":\"NewPost_newPost__2t2ka\",\"input\":\"NewPost_input__O7B-h\",\"error\":\"NewPost_error__1aIlU\",\"description\":\"NewPost_description__1_5So\",\"buttons\":\"NewPost_buttons__2rXn9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__8bgC6\",\"content\":\"Home_content__3Qx40\",\"left\":\"Home_left__2wJ4m\",\"right\":\"Home_right__3Vd87\",\"sticky\":\"Home_sticky__2N9Pd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__miWNG\",\"buttonRow\":\"Footer_buttonRow__eb9fI\",\"greyButton\":\"Footer_greyButton__1OzgT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__pTwNa\",\"modal\":\"Modal_modal__16s7U\",\"mobileExpand\":\"Modal_mobileExpand__2q2bc\",\"tabletExpand\":\"Modal_tabletExpand__3DpAd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toast\":\"Toast_toast__2hFr0\",\"show\":\"Toast_show__1EBgR\",\"text\":\"Toast_text__1Pkob\",\"close\":\"Toast_close__2EafD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileInfo\":\"ProfileInfo_profileInfo__cLKJa\",\"top\":\"ProfileInfo_top__3o043\",\"avatar\":\"ProfileInfo_avatar__2own4\",\"add\":\"ProfileInfo_add__2ntpg\",\"followers\":\"ProfileInfo_followers__2Nu_-\",\"following\":\"ProfileInfo_following__2ttTb\",\"number\":\"ProfileInfo_number__Lj_2R\",\"smallText\":\"ProfileInfo_smallText__XuTrR\",\"bottom\":\"ProfileInfo_bottom__1S_qc\",\"info\":\"ProfileInfo_info__3zEMb\",\"description\":\"ProfileInfo_description__1hzwZ\",\"actionButtons\":\"ProfileInfo_actionButtons__1207A\",\"horizontal\":\"ProfileInfo_horizontal__1TlCv\",\"name\":\"ProfileInfo_name__2Nwq-\",\"job\":\"ProfileInfo_job__b60_r\",\"separator\":\"ProfileInfo_separator__2VEdK\",\"right\":\"ProfileInfo_right__1dEse\",\"social\":\"ProfileInfo_social__17pXh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"prompt\":\"Prompt_prompt__2f5-U\",\"buttons\":\"Prompt_buttons__2X3aB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"file\":\"ImageInput_file__2jY1F\",\"preview\":\"ImageInput_preview__3egAg\",\"slider\":\"ImageInput_slider__vwkRJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photoFeed\":\"PhotoFeed_photoFeed__1hn3a\",\"square\":\"PhotoFeed_square__1VW1n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stories\":\"Stories_stories__3gVf3\",\"scroll\":\"Stories_scroll__2hIlC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ownProfile\":\"Profile_ownProfile__2Inxr\",\"content\":\"Profile_content__1JwYV\"};"],"sourceRoot":""}